(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["ieh2calc"] = factory();
	else
		root["ieh2calc"] = factory();
})(this, () => {
return /******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./src/common-exposed.js":
/*!*******************************!*\
  !*** ./src/common-exposed.js ***!
  \*******************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var ___EXPOSE_LOADER_IMPORT___ = __webpack_require__(/*! -!./common.js */ "./src/common.js");
var ___EXPOSE_LOADER_GET_GLOBAL_THIS___ = __webpack_require__(/*! ../node_modules/expose-loader/dist/runtime/getGlobalThis.js */ "./node_modules/expose-loader/dist/runtime/getGlobalThis.js");
var ___EXPOSE_LOADER_GLOBAL_THIS___ = ___EXPOSE_LOADER_GET_GLOBAL_THIS___;
var ___EXPOSE_LOADER_IMPORT_MODULE_LOCAL_NAME___ = ___EXPOSE_LOADER_IMPORT___.currentTab
if (typeof ___EXPOSE_LOADER_GLOBAL_THIS___["currentTab"] === 'undefined') ___EXPOSE_LOADER_GLOBAL_THIS___["currentTab"] = ___EXPOSE_LOADER_IMPORT_MODULE_LOCAL_NAME___;
else throw new Error('[exposes-loader] The "currentTab" value exists in the global scope, it may not be safe to overwrite it, use the "override" option')
var ___EXPOSE_LOADER_IMPORT_MODULE_LOCAL_NAME___ = ___EXPOSE_LOADER_IMPORT___.restart
if (typeof ___EXPOSE_LOADER_GLOBAL_THIS___["restart"] === 'undefined') ___EXPOSE_LOADER_GLOBAL_THIS___["restart"] = ___EXPOSE_LOADER_IMPORT_MODULE_LOCAL_NAME___;
else throw new Error('[exposes-loader] The "restart" value exists in the global scope, it may not be safe to overwrite it, use the "override" option')
module.exports = ___EXPOSE_LOADER_IMPORT___;


/***/ }),

/***/ "./src/expedition-exposed.js":
/*!***********************************!*\
  !*** ./src/expedition-exposed.js ***!
  \***********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var ___EXPOSE_LOADER_IMPORT___ = __webpack_require__(/*! -!./expedition.js */ "./src/expedition.js");
var ___EXPOSE_LOADER_GET_GLOBAL_THIS___ = __webpack_require__(/*! ../node_modules/expose-loader/dist/runtime/getGlobalThis.js */ "./node_modules/expose-loader/dist/runtime/getGlobalThis.js");
var ___EXPOSE_LOADER_GLOBAL_THIS___ = ___EXPOSE_LOADER_GET_GLOBAL_THIS___;
var ___EXPOSE_LOADER_IMPORT_MODULE_LOCAL_NAME___ = ___EXPOSE_LOADER_IMPORT___.expeditionSave
if (typeof ___EXPOSE_LOADER_GLOBAL_THIS___["expeditionSave"] === 'undefined') ___EXPOSE_LOADER_GLOBAL_THIS___["expeditionSave"] = ___EXPOSE_LOADER_IMPORT_MODULE_LOCAL_NAME___;
else throw new Error('[exposes-loader] The "expeditionSave" value exists in the global scope, it may not be safe to overwrite it, use the "override" option')
module.exports = ___EXPOSE_LOADER_IMPORT___;


/***/ }),

/***/ "./src/anvil-exposed.js":
/*!******************************!*\
  !*** ./src/anvil-exposed.js ***!
  \******************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var ___EXPOSE_LOADER_IMPORT___ = __webpack_require__(/*! -!./anvil.js */ "./src/anvil.js");
var ___EXPOSE_LOADER_GET_GLOBAL_THIS___ = __webpack_require__(/*! ../node_modules/expose-loader/dist/runtime/getGlobalThis.js */ "./node_modules/expose-loader/dist/runtime/getGlobalThis.js");
var ___EXPOSE_LOADER_GLOBAL_THIS___ = ___EXPOSE_LOADER_GET_GLOBAL_THIS___;
var ___EXPOSE_LOADER_IMPORT_MODULE_LOCAL_NAME___ = ___EXPOSE_LOADER_IMPORT___.anvilSave
if (typeof ___EXPOSE_LOADER_GLOBAL_THIS___["anvilSave"] === 'undefined') ___EXPOSE_LOADER_GLOBAL_THIS___["anvilSave"] = ___EXPOSE_LOADER_IMPORT_MODULE_LOCAL_NAME___;
else throw new Error('[exposes-loader] The "anvilSave" value exists in the global scope, it may not be safe to overwrite it, use the "override" option')
module.exports = ___EXPOSE_LOADER_IMPORT___;


/***/ }),

/***/ "./src/slimebank-exposed.js":
/*!**********************************!*\
  !*** ./src/slimebank-exposed.js ***!
  \**********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var ___EXPOSE_LOADER_IMPORT___ = __webpack_require__(/*! -!./slimebank.js */ "./src/slimebank.js");
var ___EXPOSE_LOADER_GET_GLOBAL_THIS___ = __webpack_require__(/*! ../node_modules/expose-loader/dist/runtime/getGlobalThis.js */ "./node_modules/expose-loader/dist/runtime/getGlobalThis.js");
var ___EXPOSE_LOADER_GLOBAL_THIS___ = ___EXPOSE_LOADER_GET_GLOBAL_THIS___;
var ___EXPOSE_LOADER_IMPORT_MODULE_LOCAL_NAME___ = ___EXPOSE_LOADER_IMPORT___.slimeBankResearchStone
if (typeof ___EXPOSE_LOADER_GLOBAL_THIS___["slimeBankResearchStone"] === 'undefined') ___EXPOSE_LOADER_GLOBAL_THIS___["slimeBankResearchStone"] = ___EXPOSE_LOADER_IMPORT_MODULE_LOCAL_NAME___;
else throw new Error('[exposes-loader] The "slimeBankResearchStone" value exists in the global scope, it may not be safe to overwrite it, use the "override" option')
var ___EXPOSE_LOADER_IMPORT_MODULE_LOCAL_NAME___ = ___EXPOSE_LOADER_IMPORT___.slimeBankResearchLeaf
if (typeof ___EXPOSE_LOADER_GLOBAL_THIS___["slimeBankResearchLeaf"] === 'undefined') ___EXPOSE_LOADER_GLOBAL_THIS___["slimeBankResearchLeaf"] = ___EXPOSE_LOADER_IMPORT_MODULE_LOCAL_NAME___;
else throw new Error('[exposes-loader] The "slimeBankResearchLeaf" value exists in the global scope, it may not be safe to overwrite it, use the "override" option')
var ___EXPOSE_LOADER_IMPORT_MODULE_LOCAL_NAME___ = ___EXPOSE_LOADER_IMPORT___.slimeBankSlimeCoinCap1
if (typeof ___EXPOSE_LOADER_GLOBAL_THIS___["slimeBankSlimeCoinCap1"] === 'undefined') ___EXPOSE_LOADER_GLOBAL_THIS___["slimeBankSlimeCoinCap1"] = ___EXPOSE_LOADER_IMPORT_MODULE_LOCAL_NAME___;
else throw new Error('[exposes-loader] The "slimeBankSlimeCoinCap1" value exists in the global scope, it may not be safe to overwrite it, use the "override" option')
var ___EXPOSE_LOADER_IMPORT_MODULE_LOCAL_NAME___ = ___EXPOSE_LOADER_IMPORT___.slimeBankSlimeCoinCap2
if (typeof ___EXPOSE_LOADER_GLOBAL_THIS___["slimeBankSlimeCoinCap2"] === 'undefined') ___EXPOSE_LOADER_GLOBAL_THIS___["slimeBankSlimeCoinCap2"] = ___EXPOSE_LOADER_IMPORT_MODULE_LOCAL_NAME___;
else throw new Error('[exposes-loader] The "slimeBankSlimeCoinCap2" value exists in the global scope, it may not be safe to overwrite it, use the "override" option')
module.exports = ___EXPOSE_LOADER_IMPORT___;


/***/ }),

/***/ "./node_modules/expose-loader/dist/runtime/getGlobalThis.js":
/*!******************************************************************!*\
  !*** ./node_modules/expose-loader/dist/runtime/getGlobalThis.js ***!
  \******************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


// eslint-disable-next-line func-names
module.exports = function () {
  if (typeof globalThis === "object") {
    return globalThis;
  }
  var g;
  try {
    // This works if eval is allowed (see CSP)
    // eslint-disable-next-line no-new-func
    g = this || new Function("return this")();
  } catch (e) {
    // This works if the window reference is available
    if (typeof window === "object") {
      return window;
    }

    // This works if the self reference is available
    if (typeof self === "object") {
      return self;
    }

    // This works if the global reference is available
    if (typeof __webpack_require__.g !== "undefined") {
      return __webpack_require__.g;
    }
  }
  return g;
}();

/***/ }),

/***/ "./src/anvil.js":
/*!**********************!*\
  !*** ./src/anvil.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "anvilSave": () => (/* binding */ anvilSave),
/* harmony export */   "calcAnvil": () => (/* binding */ calcAnvil)
/* harmony export */ });
function anvilSave(input) {
  localStorage.setItem(input, document.getElementById(input).value);
  calcAnvil();
}

function calcAnvil() {
  var nitro = localStorage.getItem("anvil-nitro-speed");

  for (let i = 1; i <= 10; i++) {
    let id = "anvil-dungeon-" + i + "-time";
    let value = "anvil-dungeon-" + i + "-value";
    let time = "anvil-dungeon-" + i + "-time";
    let orb = "anvil-dungeon-" + i + "-orb";
    let reward = document.getElementById(
      "anvil-dungeon-" + i + "-reward"
    ).innerHTML;

    document.getElementById(id).value = localStorage.getItem(id);
    document.getElementById(value).innerHTML = Math.round(
      (3600 / document.getElementById(time).value) * reward * nitro
    );
    document.getElementById(orb).innerHTML = Math.round(
      (3600 / document.getElementById(time).value) * nitro
    );
  }

  // list.forEach(myFunction);
  // if (localStorage.getItem('anvil-fox-dungeon-1-time') && document.getElementById('anvil-fox-dungeon-1-time').value != localStorage.getItem('anvil-fox-dungeon-1-time')) {
  //   document.getElementById('anvil-fox-dungeon-1-time').value = localStorage.getItem('anvil-fox-dungeon-1-time');
  // }
  // else {localStorage.setItem('anvil-fox-dungeon-1-time', document.getElementById('anvil-fox-dungeon-1-time').value);}

  //  document.getElementById('anvil-fox-dungeon-1-value').innerHTML = 3600 / document.getElementById('anvil-fox-dungeon-1-time').value;
}




/***/ }),

/***/ "./src/common.js":
/*!***********************!*\
  !*** ./src/common.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "convert": () => (/* binding */ convert),
/* harmony export */   "convert2": () => (/* binding */ convert2),
/* harmony export */   "currentTab": () => (/* binding */ currentTab),
/* harmony export */   "restart": () => (/* binding */ restart),
/* harmony export */   "sigma": () => (/* binding */ sigma)
/* harmony export */ });
// debug
function restart() {
  window.localStorage.clear();
}

function currentTab(input) {
  localStorage.setItem("setting-currentTab", input);
}

function sigma(lowerBound, upperBound, iterator, accumulator = 0) {
  // let accumulator = 0;
  for (let i = lowerBound; i <= upperBound; ++i) {
    accumulator += iterator(i);
  }
  return accumulator;
}

// convert normal number to K,M,B,T and exponential
function convert(input) {
  input = parseFloat(input);
  var output = 0;
  if (input == 0) {
    output = 0;
  } else if (input <= 10000) {
    output = Math.round(input);
  } else if (input < 1000000) {
    output = (input / 1000).toFixed(2) + "K";
  } else if (input < 1000000000) {
    output = (input / 1000000).toFixed(2) + "M";
  } else if (input < 1000000000000) {
    output = (input / 1000000000).toFixed(3) + "B";
  } else if (input < 1000000000000000) {
    output = (input / 1000000000000).toFixed(2) + "T";
  } else {
    output = input.toExponential(2);
  }

  return output;
}

// convert k,m,b,t to normal numbers
function convert2(input) {
  if (/^\d*\.?\d+$/.test(input)) {
    return Math.round(input);
  } // return rounded number if there is no abbreviete
  else {
    const regex = /(.*)(\D)$/gm;
    input = input.toLowerCase();
    input = input.replace(/ /g, ""); //removes all spaces
    input = regex.exec(input);
    let output = 0;
    if (input[2] == "t") {
      output = input[1] * 1000 ** 4;
    } else if (input[2] == "b") {
      output = input[1] * 1000 ** 3;
    } else if (input[2] == "m") {
      output = input[1] * 1000 ** 2;
    } else if (input[2] == "k") {
      output = input[1] * 1000 ** 1;
    }

    return output;
  }
}




/***/ }),

/***/ "./src/expedition.js":
/*!***************************!*\
  !*** ./src/expedition.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "calcExpedition": () => (/* binding */ calcExpedition),
/* harmony export */   "expeditionLoad": () => (/* binding */ expeditionLoad),
/* harmony export */   "expeditionSave": () => (/* binding */ expeditionSave),
/* harmony export */   "testExpedition": () => (/* binding */ testExpedition)
/* harmony export */ });
function expeditionSave(input) {
  if (document.getElementById(input).type == "text") {
    localStorage.setItem(input, document.getElementById(input).value);
    // console.log('text');
  } else if (document.getElementById(input).type == "checkbox") {
    localStorage.setItem(input, document.getElementById(input).checked);

    // console.log('checkbox');
    // console.log(document.getElementById(input).checked);
    // console.log(localStorage.getItem(input));
  }

  // console.log(input);
  calcExpedition();
}

function expeditionLoad() {
  let speedBonus1 = "expedition-speed-bonus-1";
  let speedBonus2 = "expedition-speed-bonus-2";
  let speedBonus3 = "expedition-speed-bonus-3";

  if (localStorage.getItem(speedBonus1) === null) {
    localStorage.setItem(speedBonus1, 100);
  } else {
    document.getElementById(speedBonus1).value =
      localStorage.getItem(speedBonus1);
  }
  if (localStorage.getItem(speedBonus2) === null) {
    localStorage.setItem(
      speedBonus2,
      document.getElementById(speedBonus2).checked
    );
  } else {
    document.getElementById(speedBonus2).checked =
      localStorage.getItem(speedBonus2) === "true";
  }
  if (localStorage.getItem(speedBonus3) === null) {
    localStorage.setItem(speedBonus3, false);
  } else {
    document.getElementById(speedBonus3).checked =
      localStorage.getItem(speedBonus3) === "true";
  }

  calcExpedition();
}

function calcExpedition() {
  // var nitro = localStorage.getItem('anvil-nitro-speed');
  let speedBonus1 = localStorage.getItem("expedition-speed-bonus-1");
  let speedBonus2 = "expedition-speed-bonus-2";
  let speedBonus3 = "expedition-speed-bonus-3";
  let totalSpeed = 0;
  // if (localStorage.getItem(speedBonus1) === null) {localStorage.setItem(speedBonus1, document.getElementById(speedBonus1).checked);}
  // else {document.getElementById(speedBonus1).checked = localStorage.getItem(speedBonus1);}
  let speedTable = [
    [106.519, "48.0h"],
    [68.014, "24.0h"],
    [35.495, "16.0h"],
    [17.759, "8.0h"],
    [8.877, "4.0h"],
    [4.439, "2.0h"],
    [2.2, "1.0h"],
  ];
  // if (localStorage.getItem(speedBonus2) == true) {totalSpeed += 1;}

  for (let i = 1; i <= 8; i++) {
    let level = "expedition-team-" + i + "-level";
    let speed = "expedition-team-" + i + "-speed";
    let time = "expedition-team-" + i + "-time";

    if (localStorage.getItem(level) === null) {
      localStorage.setItem(level, document.getElementById(level).value);
    } else {
      document.getElementById(level).value = localStorage.getItem(level);
    }

    //   reward = document.getElementById('anvil-dungeon-' + i + '-reward').innerHTML;
    document.getElementById(level).value = localStorage.getItem(level);
    let baseSpeed = 1 + document.getElementById(level).value * 0.001;
    // totalSpeed = baseSpeed ;
    let totalSpeed = (baseSpeed * speedBonus1) / 100;
    // if (localStorage.getItem(speedBonus2) === 'true') {totalSpeed += 1;}
    if (localStorage.getItem(speedBonus2) == "true") {
      totalSpeed += ((baseSpeed * speedBonus1) / 100) * 0.25;
    }
    if (localStorage.getItem(speedBonus3) == "true") {
      totalSpeed += ((baseSpeed * speedBonus1) / 100) * 0.25;
    }

    for (let i = 0; i < speedTable.length; i++) {
      if (totalSpeed >= speedTable[i][0]) {
        document.getElementById(time).innerHTML = speedTable[i][1];
        break;
      } else {
        document.getElementById(time).innerHTML = "0.5h";
      }
    }

    // for (const [key, value] of Object.entries(speedTable)) {
    //   if (totalSpeed > key) {
    //     document.getElementById(time).innerHTML = value;
    //   }
    //   console.log(`${key}: ${value}`);
    // }

    document.getElementById(speed).innerHTML = totalSpeed.toFixed(3);
    //   document.getElementById(orb).innerHTML = Math.round(3600 / document.getElementById(time).value * nitro) ;
  }
}

function testExpedition() {
  return "testExpedition";
}




/***/ }),

/***/ "./src/globals.js":
/*!************************!*\
  !*** ./src/globals.js ***!
  \************************/
/***/ (() => {

const file = "blah.txt";
const helpers = {
  test: function () {
    console.log("test something");
  },
  parse: function () {
    console.log("parse something");
  },
};


/***/ }),

/***/ "./src/load.js":
/*!*********************!*\
  !*** ./src/load.js ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "load": () => (/* binding */ load)
/* harmony export */ });
/* harmony import */ var _anvil_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./anvil.js */ "./src/anvil-exposed.js");
/* harmony import */ var _anvil_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_anvil_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _expedition_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./expedition.js */ "./src/expedition-exposed.js");
/* harmony import */ var _expedition_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_expedition_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _slimebank_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./slimebank.js */ "./src/slimebank-exposed.js");
/* harmony import */ var _slimebank_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_slimebank_js__WEBPACK_IMPORTED_MODULE_2__);
// import { convert, convert2, sigma, restart, currentTab } from "./common.js";





function load() {
  // current tab
  var tab = 0;
  const tab_list = ["slime-bank", "lab", "anvil", "expedition"];
  if (localStorage.getItem("setting-currentTab")) {
    tab_list.forEach((element) => {
      tab = element + "-calculator";
      if (localStorage.getItem("setting-currentTab") == element) {
        document.getElementById(tab).style.display = "block";
        document.getElementById(element).style.color = "#f2e009";
      } else {
        document.getElementById(tab).style.display = "none";
      }
    });
  } else {
    localStorage.setItem("setting-currentTab", "slime-bank");
    document.getElementById("slime-bank").style.color = "#f2e009";
    document.getElementById("lab-calculator").style.display = "none";
    document.getElementById("anvil-calculator").style.display = "none";
    document.getElementById("expedition-calculator").style.display = "none";
  }
  // Anvil loading
  if (localStorage.getItem("anvil-nitro-speed") === null) {
    localStorage.setItem("anvil-nitro-speed", 1);
  } else {
    document.getElementById("anvil-nitro-speed").value =
      localStorage.getItem("anvil-nitro-speed");
  }
  // anvil load need refactor

  for (let i = 1; i <= 10; i++) {
    var id = 0;
    id = "anvil-dungeon-" + i + "-time";
    if (localStorage.getItem(id) === null) {
      localStorage.setItem(id, document.getElementById(id).value);
    } else {
      document.getElementById(id).value = localStorage.getItem(id);
    }
  }
  (0,_anvil_js__WEBPACK_IMPORTED_MODULE_0__.calcAnvil)();
  // calcExpedition();
  (0,_expedition_js__WEBPACK_IMPORTED_MODULE_1__.expeditionLoad)();
  // loading values from localStorage else setting values as 0
  // const list = [
  //   'anvil-fox-dungeon-1-time', 'anvil-fox-dungeon-2-time', 'anvil-fox-dungeon-3-time',
  // 'anvil-fox-dungeon-4-time', 'anvil-fox-dungeon-5-time','anvil-bat-dungeon-1-time','anvil-bat-dungeon-2-time',
  // 'anvil-bat-dungeon-3-time','anvil-bat-dungeon-4-time','anvil-bat-dungeon-5-time'];
  // const items = { ...localStorage };
  // console.log(items);
  // list.forEach(element => {
  //  console.log(element);
  //  if (localStorage.getItem(element) === null) {slimeBankResearchStone(0);}
  //  else {slimeBankResearchStone(localStorage.getItem('slime-bank-research-stone-level'));}
  // });

  // Slime Bank loading
  if (localStorage.getItem("slime-bank-research-stone-level") === null) {
    (0,_slimebank_js__WEBPACK_IMPORTED_MODULE_2__.slimeBankResearchStone)(0);
  } else {
    (0,_slimebank_js__WEBPACK_IMPORTED_MODULE_2__.slimeBankResearchStone)(
      localStorage.getItem("slime-bank-research-stone-level")
    );
  }

  if (localStorage.getItem("slime-bank-research-leaf-level") === null) {
    (0,_slimebank_js__WEBPACK_IMPORTED_MODULE_2__.slimeBankResearchLeaf)(0);
  } else {
    (0,_slimebank_js__WEBPACK_IMPORTED_MODULE_2__.slimeBankResearchLeaf)(
      localStorage.getItem("slime-bank-research-leaf-level")
    );
  }

  if (
    localStorage.getItem("slime-bank-upgrade-slime-coin-cap-1-level") === null
  ) {
    (0,_slimebank_js__WEBPACK_IMPORTED_MODULE_2__.slimeBankSlimeCoinCap1)(0);
  } else {
    (0,_slimebank_js__WEBPACK_IMPORTED_MODULE_2__.slimeBankSlimeCoinCap1)(
      localStorage.getItem("slime-bank-upgrade-slime-coin-cap-1-level")
    );
  }

  if (
    localStorage.getItem("slime-bank-upgrade-slime-coin-cap-2-level") === null
  ) {
    (0,_slimebank_js__WEBPACK_IMPORTED_MODULE_2__.slimeBankSlimeCoinCap2)(0);
  } else {
    (0,_slimebank_js__WEBPACK_IMPORTED_MODULE_2__.slimeBankSlimeCoinCap2)(
      localStorage.getItem("slime-bank-upgrade-slime-coin-cap-2-level")
    );
  }

  // slimeBankSlimeCoinCapTotal();
  // slimeBankIntrest();
  // slimeBankOptimiser();
  // debug
  // for (const [key, value] of Object.entries({ ...localStorage })) {
  //   // console.log(`${key}: ${value}`);
  //   document.getElementById('debug').innerHTML += `<i>${key}:</i> <b>${value}</b><br>`;
  // }
}




/***/ }),

/***/ "./src/slimebank.js":
/*!**************************!*\
  !*** ./src/slimebank.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "slimeBankIntrest": () => (/* binding */ slimeBankIntrest),
/* harmony export */   "slimeBankOptimiser": () => (/* binding */ slimeBankOptimiser),
/* harmony export */   "slimeBankResearchLeaf": () => (/* binding */ slimeBankResearchLeaf),
/* harmony export */   "slimeBankResearchStone": () => (/* binding */ slimeBankResearchStone),
/* harmony export */   "slimeBankSlimeCoinCap1": () => (/* binding */ slimeBankSlimeCoinCap1),
/* harmony export */   "slimeBankSlimeCoinCap2": () => (/* binding */ slimeBankSlimeCoinCap2),
/* harmony export */   "slimeBankSlimeCoinCapTotal": () => (/* binding */ slimeBankSlimeCoinCapTotal)
/* harmony export */ });
/* harmony import */ var _common_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./common.js */ "./src/common-exposed.js");
/* harmony import */ var _common_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_common_js__WEBPACK_IMPORTED_MODULE_0__);

// Slime Bank functions

function slimeBankSlimeCoinCapTotal() {
  let output =
    localStorage.getItem("slime-bank-upgrade-slime-coin-cap-1-value") *
    ((localStorage.getItem("slime-bank-research-leaf-level") * 2 + 100) / 100) *
    (localStorage.getItem("slime-bank-upgrade-slime-coin-cap-2-value") / 100);
  localStorage.setItem("slime-bank-slime-coin-cap-total", output);
  document.getElementById("slime-bank-slime-coin-cap-value").innerHTML =
    (0,_common_js__WEBPACK_IMPORTED_MODULE_0__.convert)(output);
  slimeBankIntrest();
  slimeBankOptimiser();
}

function slimeBankIntrest() {
  let intrest =
    document.getElementById("slime-bank-research-stone-level").value *
    0.001 *
    localStorage.getItem("slime-bank-slime-coin-cap-total");
  localStorage.setItem("slime-bank-intrest", intrest);
  document.getElementById("slime-bank-intrest").innerHTML = (0,_common_js__WEBPACK_IMPORTED_MODULE_0__.convert)(intrest);
  slimeBankOptimiser();
}

function slimeBankOptimiser() {
  let slime_coin_cap_1_level = localStorage.getItem(
    "slime-bank-upgrade-slime-coin-cap-1-level"
  );
  let intrest =
    localStorage.getItem("slime-bank-intrest") -
    localStorage.getItem("slime-bank-intrest") * 0.1;
  let slime_coin_cap_1_cost;

  if (slime_coin_cap_1_level >= 1000000000) {
    slime_coin_cap_1_cost = 10000000000000000;
  } // 1.00+E16
  else if (slime_coin_cap_1_level >= 500000000) {
    slime_coin_cap_1_cost = 1000000000000000;
  } // 1.00+E15
  else if (slime_coin_cap_1_level >= 100000000) {
    slime_coin_cap_1_cost = 100000000000000;
  } // 100T
  else if (slime_coin_cap_1_level >= 50000000) {
    slime_coin_cap_1_cost = 10000000000000;
  } // 10T
  else if (slime_coin_cap_1_level >= 10000000) {
    slime_coin_cap_1_cost = 1000000000000;
  } // 1T
  else {
    slime_coin_cap_1_cost =
      localStorage.getItem("slime-bank-upgrade-slime-coin-cap-1-level") *
        10000 +
      10000;
  } // need to find solution for less than 10M upgrades

  document.getElementById("slime-bank-upgrade-slime-coin-cap-1-cost").value =
    (0,_common_js__WEBPACK_IMPORTED_MODULE_0__.convert)(slime_coin_cap_1_cost);
  let output = Math.round(intrest / slime_coin_cap_1_cost);
  document.getElementById("slime-bank-optimiser").innerHTML = output;
}

function slimeBankSlimeCoinCap1(input) {
  input = (0,_common_js__WEBPACK_IMPORTED_MODULE_0__.convert2)(input);

  if (
    input != localStorage.getItem("slime-bank-upgrade-slime-coin-cap-1-level")
  ) {
    let output = (0,_common_js__WEBPACK_IMPORTED_MODULE_0__.sigma)(
      0,
      input,
      function (a) {
        return a * 20 - 10 + 10000;
      },
      10
    );
    document.getElementById(
      "slime-bank-upgrade-slime-coin-cap-1-value"
    ).innerHTML = (0,_common_js__WEBPACK_IMPORTED_MODULE_0__.convert)(output);
    localStorage.setItem("slime-bank-upgrade-slime-coin-cap-1-level", input);
    localStorage.setItem("slime-bank-upgrade-slime-coin-cap-1-value", output);
  } else {
    document.getElementById(
      "slime-bank-upgrade-slime-coin-cap-1-value"
    ).innerHTML = (0,_common_js__WEBPACK_IMPORTED_MODULE_0__.convert)(
      localStorage.getItem("slime-bank-upgrade-slime-coin-cap-1-value")
    );
  }
  document.getElementById("slime-bank-upgrade-slime-coin-cap-1-level").value =
    (0,_common_js__WEBPACK_IMPORTED_MODULE_0__.convert)(localStorage.getItem("slime-bank-upgrade-slime-coin-cap-1-level"));
  slimeBankSlimeCoinCapTotal();
}

function slimeBankSlimeCoinCap2(input) {
  let output = (0,_common_js__WEBPACK_IMPORTED_MODULE_0__.sigma)(
    0,
    input,
    function (a) {
      return a * 20 - 10;
    },
    10
  );
  localStorage.setItem("slime-bank-upgrade-slime-coin-cap-2-level", input);
  localStorage.setItem(
    "slime-bank-upgrade-slime-coin-cap-2-value",
    output + 100
  );
  document.getElementById(
    "slime-bank-upgrade-slime-coin-cap-2-value"
  ).innerHTML = (0,_common_js__WEBPACK_IMPORTED_MODULE_0__.convert)(output + 100);
  document.getElementById("slime-bank-upgrade-slime-coin-cap-2-level").value =
    localStorage.getItem("slime-bank-upgrade-slime-coin-cap-2-level");
  slimeBankSlimeCoinCapTotal();
}

function slimeBankResearchStone(input) {
  localStorage.setItem("slime-bank-research-stone-level", input);
  document.getElementById("slime-bank-research-stone-level").value =
    localStorage.getItem("slime-bank-research-stone-level");
  document.getElementById("slime-bank-research-stone-value").innerHTML = +(
    input * 0.1
  ).toFixed(2);
  slimeBankIntrest();
}

function slimeBankResearchLeaf(input) {
  localStorage.setItem("slime-bank-research-leaf-level", input);
  document.getElementById("slime-bank-research-leaf-level").value =
    localStorage.getItem("slime-bank-research-leaf-level");
  document.getElementById("slime-bank-research-leaf-value").innerHTML =
    +(input * 2).toFixed(2) + 100;
  slimeBankSlimeCoinCapTotal();
}




/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _load_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./load.js */ "./src/load.js");
// import { currentTab } from "./common.js";
// import { currentTab } from "expose-loader?exposes=window.$ currentTab";
//
// Adds the `jquery` to the global object under the names `$` and `jQuery`

const { file, parse } = __webpack_require__(/*! ./globals.js */ "./src/globals.js");

function ready(fn) {
  if (document.readyState != "loading") {
    fn();
  } else {
    document.addEventListener("DOMContentLoaded", fn);
  }
}

ready(function () {
  // start up your app
  (0,_load_js__WEBPACK_IMPORTED_MODULE_0__.load)();
  // console.log(document.body);
  // const xxx = currentTab();
});
// this.alert("Hmmm, this probably isn't a great idea...");

})();

/******/ 	return __webpack_exports__;
/******/ })()
;
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDQSxJQUFJLG1EQUFPO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGlEQUFLO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixtREFBTztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFTRTs7Ozs7OztVQzlJRjtVQUNBOztVQUVBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBOztVQUVBO1VBQ0E7O1VBRUE7VUFDQTtVQUNBOzs7OztXQ3RCQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0EsaUNBQWlDLFdBQVc7V0FDNUM7V0FDQTs7Ozs7V0NQQTtXQUNBO1dBQ0E7V0FDQTtXQUNBLHlDQUF5Qyx3Q0FBd0M7V0FDakY7V0FDQTtXQUNBOzs7OztXQ1BBO1dBQ0E7V0FDQTtXQUNBO1dBQ0EsR0FBRztXQUNIO1dBQ0E7V0FDQSxDQUFDOzs7OztXQ1BEOzs7OztXQ0FBO1dBQ0E7V0FDQTtXQUNBLHVEQUF1RCxpQkFBaUI7V0FDeEU7V0FDQSxnREFBZ0QsYUFBYTtXQUM3RDs7Ozs7Ozs7Ozs7OztBQ05BLFlBQVksYUFBYTtBQUN6QixZQUFZLGFBQWE7QUFDekI7QUFDQTtBQUNpQztBQUNqQyxRQUFRLGNBQWMsRUFBRSxtQkFBTyxDQUFDLHNDQUFjO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsOENBQUk7QUFDTjtBQUNBO0FBQ0EsQ0FBQztBQUNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaWVoMmNhbGMvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL2llaDJjYWxjLy4vc3JjL2NvbW1vbi1leHBvc2VkLmpzIiwid2VicGFjazovL2llaDJjYWxjLy4vc3JjL2V4cGVkaXRpb24tZXhwb3NlZC5qcyIsIndlYnBhY2s6Ly9pZWgyY2FsYy8uL3NyYy9hbnZpbC1leHBvc2VkLmpzIiwid2VicGFjazovL2llaDJjYWxjLy4vc3JjL3NsaW1lYmFuay1leHBvc2VkLmpzIiwid2VicGFjazovL2llaDJjYWxjLy4vbm9kZV9tb2R1bGVzL2V4cG9zZS1sb2FkZXIvZGlzdC9ydW50aW1lL2dldEdsb2JhbFRoaXMuanMiLCJ3ZWJwYWNrOi8vaWVoMmNhbGMvLi9zcmMvYW52aWwuanMiLCJ3ZWJwYWNrOi8vaWVoMmNhbGMvLi9zcmMvY29tbW9uLmpzIiwid2VicGFjazovL2llaDJjYWxjLy4vc3JjL2V4cGVkaXRpb24uanMiLCJ3ZWJwYWNrOi8vaWVoMmNhbGMvLi9zcmMvZ2xvYmFscy5qcyIsIndlYnBhY2s6Ly9pZWgyY2FsYy8uL3NyYy9sb2FkLmpzIiwid2VicGFjazovL2llaDJjYWxjLy4vc3JjL3NsaW1lYmFuay5qcyIsIndlYnBhY2s6Ly9pZWgyY2FsYy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9pZWgyY2FsYy93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly9pZWgyY2FsYy93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vaWVoMmNhbGMvd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly9pZWgyY2FsYy93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2llaDJjYWxjL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vaWVoMmNhbGMvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiaWVoMmNhbGNcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wiaWVoMmNhbGNcIl0gPSBmYWN0b3J5KCk7XG59KSh0aGlzLCAoKSA9PiB7XG5yZXR1cm4gIiwidmFyIF9fX0VYUE9TRV9MT0FERVJfSU1QT1JUX19fID0gcmVxdWlyZShcIi0hLi9jb21tb24uanNcIik7XG52YXIgX19fRVhQT1NFX0xPQURFUl9HRVRfR0xPQkFMX1RISVNfX18gPSByZXF1aXJlKFwiLi4vbm9kZV9tb2R1bGVzL2V4cG9zZS1sb2FkZXIvZGlzdC9ydW50aW1lL2dldEdsb2JhbFRoaXMuanNcIik7XG52YXIgX19fRVhQT1NFX0xPQURFUl9HTE9CQUxfVEhJU19fXyA9IF9fX0VYUE9TRV9MT0FERVJfR0VUX0dMT0JBTF9USElTX19fO1xudmFyIF9fX0VYUE9TRV9MT0FERVJfSU1QT1JUX01PRFVMRV9MT0NBTF9OQU1FX19fID0gX19fRVhQT1NFX0xPQURFUl9JTVBPUlRfX18uY3VycmVudFRhYlxuaWYgKHR5cGVvZiBfX19FWFBPU0VfTE9BREVSX0dMT0JBTF9USElTX19fW1wiY3VycmVudFRhYlwiXSA9PT0gJ3VuZGVmaW5lZCcpIF9fX0VYUE9TRV9MT0FERVJfR0xPQkFMX1RISVNfX19bXCJjdXJyZW50VGFiXCJdID0gX19fRVhQT1NFX0xPQURFUl9JTVBPUlRfTU9EVUxFX0xPQ0FMX05BTUVfX187XG5lbHNlIHRocm93IG5ldyBFcnJvcignW2V4cG9zZXMtbG9hZGVyXSBUaGUgXCJjdXJyZW50VGFiXCIgdmFsdWUgZXhpc3RzIGluIHRoZSBnbG9iYWwgc2NvcGUsIGl0IG1heSBub3QgYmUgc2FmZSB0byBvdmVyd3JpdGUgaXQsIHVzZSB0aGUgXCJvdmVycmlkZVwiIG9wdGlvbicpXG52YXIgX19fRVhQT1NFX0xPQURFUl9JTVBPUlRfTU9EVUxFX0xPQ0FMX05BTUVfX18gPSBfX19FWFBPU0VfTE9BREVSX0lNUE9SVF9fXy5yZXN0YXJ0XG5pZiAodHlwZW9mIF9fX0VYUE9TRV9MT0FERVJfR0xPQkFMX1RISVNfX19bXCJyZXN0YXJ0XCJdID09PSAndW5kZWZpbmVkJykgX19fRVhQT1NFX0xPQURFUl9HTE9CQUxfVEhJU19fX1tcInJlc3RhcnRcIl0gPSBfX19FWFBPU0VfTE9BREVSX0lNUE9SVF9NT0RVTEVfTE9DQUxfTkFNRV9fXztcbmVsc2UgdGhyb3cgbmV3IEVycm9yKCdbZXhwb3Nlcy1sb2FkZXJdIFRoZSBcInJlc3RhcnRcIiB2YWx1ZSBleGlzdHMgaW4gdGhlIGdsb2JhbCBzY29wZSwgaXQgbWF5IG5vdCBiZSBzYWZlIHRvIG92ZXJ3cml0ZSBpdCwgdXNlIHRoZSBcIm92ZXJyaWRlXCIgb3B0aW9uJylcbm1vZHVsZS5leHBvcnRzID0gX19fRVhQT1NFX0xPQURFUl9JTVBPUlRfX187XG4iLCJ2YXIgX19fRVhQT1NFX0xPQURFUl9JTVBPUlRfX18gPSByZXF1aXJlKFwiLSEuL2V4cGVkaXRpb24uanNcIik7XG52YXIgX19fRVhQT1NFX0xPQURFUl9HRVRfR0xPQkFMX1RISVNfX18gPSByZXF1aXJlKFwiLi4vbm9kZV9tb2R1bGVzL2V4cG9zZS1sb2FkZXIvZGlzdC9ydW50aW1lL2dldEdsb2JhbFRoaXMuanNcIik7XG52YXIgX19fRVhQT1NFX0xPQURFUl9HTE9CQUxfVEhJU19fXyA9IF9fX0VYUE9TRV9MT0FERVJfR0VUX0dMT0JBTF9USElTX19fO1xudmFyIF9fX0VYUE9TRV9MT0FERVJfSU1QT1JUX01PRFVMRV9MT0NBTF9OQU1FX19fID0gX19fRVhQT1NFX0xPQURFUl9JTVBPUlRfX18uZXhwZWRpdGlvblNhdmVcbmlmICh0eXBlb2YgX19fRVhQT1NFX0xPQURFUl9HTE9CQUxfVEhJU19fX1tcImV4cGVkaXRpb25TYXZlXCJdID09PSAndW5kZWZpbmVkJykgX19fRVhQT1NFX0xPQURFUl9HTE9CQUxfVEhJU19fX1tcImV4cGVkaXRpb25TYXZlXCJdID0gX19fRVhQT1NFX0xPQURFUl9JTVBPUlRfTU9EVUxFX0xPQ0FMX05BTUVfX187XG5lbHNlIHRocm93IG5ldyBFcnJvcignW2V4cG9zZXMtbG9hZGVyXSBUaGUgXCJleHBlZGl0aW9uU2F2ZVwiIHZhbHVlIGV4aXN0cyBpbiB0aGUgZ2xvYmFsIHNjb3BlLCBpdCBtYXkgbm90IGJlIHNhZmUgdG8gb3ZlcndyaXRlIGl0LCB1c2UgdGhlIFwib3ZlcnJpZGVcIiBvcHRpb24nKVxubW9kdWxlLmV4cG9ydHMgPSBfX19FWFBPU0VfTE9BREVSX0lNUE9SVF9fXztcbiIsInZhciBfX19FWFBPU0VfTE9BREVSX0lNUE9SVF9fXyA9IHJlcXVpcmUoXCItIS4vYW52aWwuanNcIik7XG52YXIgX19fRVhQT1NFX0xPQURFUl9HRVRfR0xPQkFMX1RISVNfX18gPSByZXF1aXJlKFwiLi4vbm9kZV9tb2R1bGVzL2V4cG9zZS1sb2FkZXIvZGlzdC9ydW50aW1lL2dldEdsb2JhbFRoaXMuanNcIik7XG52YXIgX19fRVhQT1NFX0xPQURFUl9HTE9CQUxfVEhJU19fXyA9IF9fX0VYUE9TRV9MT0FERVJfR0VUX0dMT0JBTF9USElTX19fO1xudmFyIF9fX0VYUE9TRV9MT0FERVJfSU1QT1JUX01PRFVMRV9MT0NBTF9OQU1FX19fID0gX19fRVhQT1NFX0xPQURFUl9JTVBPUlRfX18uYW52aWxTYXZlXG5pZiAodHlwZW9mIF9fX0VYUE9TRV9MT0FERVJfR0xPQkFMX1RISVNfX19bXCJhbnZpbFNhdmVcIl0gPT09ICd1bmRlZmluZWQnKSBfX19FWFBPU0VfTE9BREVSX0dMT0JBTF9USElTX19fW1wiYW52aWxTYXZlXCJdID0gX19fRVhQT1NFX0xPQURFUl9JTVBPUlRfTU9EVUxFX0xPQ0FMX05BTUVfX187XG5lbHNlIHRocm93IG5ldyBFcnJvcignW2V4cG9zZXMtbG9hZGVyXSBUaGUgXCJhbnZpbFNhdmVcIiB2YWx1ZSBleGlzdHMgaW4gdGhlIGdsb2JhbCBzY29wZSwgaXQgbWF5IG5vdCBiZSBzYWZlIHRvIG92ZXJ3cml0ZSBpdCwgdXNlIHRoZSBcIm92ZXJyaWRlXCIgb3B0aW9uJylcbm1vZHVsZS5leHBvcnRzID0gX19fRVhQT1NFX0xPQURFUl9JTVBPUlRfX187XG4iLCJ2YXIgX19fRVhQT1NFX0xPQURFUl9JTVBPUlRfX18gPSByZXF1aXJlKFwiLSEuL3NsaW1lYmFuay5qc1wiKTtcbnZhciBfX19FWFBPU0VfTE9BREVSX0dFVF9HTE9CQUxfVEhJU19fXyA9IHJlcXVpcmUoXCIuLi9ub2RlX21vZHVsZXMvZXhwb3NlLWxvYWRlci9kaXN0L3J1bnRpbWUvZ2V0R2xvYmFsVGhpcy5qc1wiKTtcbnZhciBfX19FWFBPU0VfTE9BREVSX0dMT0JBTF9USElTX19fID0gX19fRVhQT1NFX0xPQURFUl9HRVRfR0xPQkFMX1RISVNfX187XG52YXIgX19fRVhQT1NFX0xPQURFUl9JTVBPUlRfTU9EVUxFX0xPQ0FMX05BTUVfX18gPSBfX19FWFBPU0VfTE9BREVSX0lNUE9SVF9fXy5zbGltZUJhbmtSZXNlYXJjaFN0b25lXG5pZiAodHlwZW9mIF9fX0VYUE9TRV9MT0FERVJfR0xPQkFMX1RISVNfX19bXCJzbGltZUJhbmtSZXNlYXJjaFN0b25lXCJdID09PSAndW5kZWZpbmVkJykgX19fRVhQT1NFX0xPQURFUl9HTE9CQUxfVEhJU19fX1tcInNsaW1lQmFua1Jlc2VhcmNoU3RvbmVcIl0gPSBfX19FWFBPU0VfTE9BREVSX0lNUE9SVF9NT0RVTEVfTE9DQUxfTkFNRV9fXztcbmVsc2UgdGhyb3cgbmV3IEVycm9yKCdbZXhwb3Nlcy1sb2FkZXJdIFRoZSBcInNsaW1lQmFua1Jlc2VhcmNoU3RvbmVcIiB2YWx1ZSBleGlzdHMgaW4gdGhlIGdsb2JhbCBzY29wZSwgaXQgbWF5IG5vdCBiZSBzYWZlIHRvIG92ZXJ3cml0ZSBpdCwgdXNlIHRoZSBcIm92ZXJyaWRlXCIgb3B0aW9uJylcbnZhciBfX19FWFBPU0VfTE9BREVSX0lNUE9SVF9NT0RVTEVfTE9DQUxfTkFNRV9fXyA9IF9fX0VYUE9TRV9MT0FERVJfSU1QT1JUX19fLnNsaW1lQmFua1Jlc2VhcmNoTGVhZlxuaWYgKHR5cGVvZiBfX19FWFBPU0VfTE9BREVSX0dMT0JBTF9USElTX19fW1wic2xpbWVCYW5rUmVzZWFyY2hMZWFmXCJdID09PSAndW5kZWZpbmVkJykgX19fRVhQT1NFX0xPQURFUl9HTE9CQUxfVEhJU19fX1tcInNsaW1lQmFua1Jlc2VhcmNoTGVhZlwiXSA9IF9fX0VYUE9TRV9MT0FERVJfSU1QT1JUX01PRFVMRV9MT0NBTF9OQU1FX19fO1xuZWxzZSB0aHJvdyBuZXcgRXJyb3IoJ1tleHBvc2VzLWxvYWRlcl0gVGhlIFwic2xpbWVCYW5rUmVzZWFyY2hMZWFmXCIgdmFsdWUgZXhpc3RzIGluIHRoZSBnbG9iYWwgc2NvcGUsIGl0IG1heSBub3QgYmUgc2FmZSB0byBvdmVyd3JpdGUgaXQsIHVzZSB0aGUgXCJvdmVycmlkZVwiIG9wdGlvbicpXG52YXIgX19fRVhQT1NFX0xPQURFUl9JTVBPUlRfTU9EVUxFX0xPQ0FMX05BTUVfX18gPSBfX19FWFBPU0VfTE9BREVSX0lNUE9SVF9fXy5zbGltZUJhbmtTbGltZUNvaW5DYXAxXG5pZiAodHlwZW9mIF9fX0VYUE9TRV9MT0FERVJfR0xPQkFMX1RISVNfX19bXCJzbGltZUJhbmtTbGltZUNvaW5DYXAxXCJdID09PSAndW5kZWZpbmVkJykgX19fRVhQT1NFX0xPQURFUl9HTE9CQUxfVEhJU19fX1tcInNsaW1lQmFua1NsaW1lQ29pbkNhcDFcIl0gPSBfX19FWFBPU0VfTE9BREVSX0lNUE9SVF9NT0RVTEVfTE9DQUxfTkFNRV9fXztcbmVsc2UgdGhyb3cgbmV3IEVycm9yKCdbZXhwb3Nlcy1sb2FkZXJdIFRoZSBcInNsaW1lQmFua1NsaW1lQ29pbkNhcDFcIiB2YWx1ZSBleGlzdHMgaW4gdGhlIGdsb2JhbCBzY29wZSwgaXQgbWF5IG5vdCBiZSBzYWZlIHRvIG92ZXJ3cml0ZSBpdCwgdXNlIHRoZSBcIm92ZXJyaWRlXCIgb3B0aW9uJylcbnZhciBfX19FWFBPU0VfTE9BREVSX0lNUE9SVF9NT0RVTEVfTE9DQUxfTkFNRV9fXyA9IF9fX0VYUE9TRV9MT0FERVJfSU1QT1JUX19fLnNsaW1lQmFua1NsaW1lQ29pbkNhcDJcbmlmICh0eXBlb2YgX19fRVhQT1NFX0xPQURFUl9HTE9CQUxfVEhJU19fX1tcInNsaW1lQmFua1NsaW1lQ29pbkNhcDJcIl0gPT09ICd1bmRlZmluZWQnKSBfX19FWFBPU0VfTE9BREVSX0dMT0JBTF9USElTX19fW1wic2xpbWVCYW5rU2xpbWVDb2luQ2FwMlwiXSA9IF9fX0VYUE9TRV9MT0FERVJfSU1QT1JUX01PRFVMRV9MT0NBTF9OQU1FX19fO1xuZWxzZSB0aHJvdyBuZXcgRXJyb3IoJ1tleHBvc2VzLWxvYWRlcl0gVGhlIFwic2xpbWVCYW5rU2xpbWVDb2luQ2FwMlwiIHZhbHVlIGV4aXN0cyBpbiB0aGUgZ2xvYmFsIHNjb3BlLCBpdCBtYXkgbm90IGJlIHNhZmUgdG8gb3ZlcndyaXRlIGl0LCB1c2UgdGhlIFwib3ZlcnJpZGVcIiBvcHRpb24nKVxubW9kdWxlLmV4cG9ydHMgPSBfX19FWFBPU0VfTE9BREVSX0lNUE9SVF9fXztcbiIsIlwidXNlIHN0cmljdFwiO1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gXCJvYmplY3RcIikge1xuICAgIHJldHVybiBnbG9iYWxUaGlzO1xuICB9XG4gIHZhciBnO1xuICB0cnkge1xuICAgIC8vIFRoaXMgd29ya3MgaWYgZXZhbCBpcyBhbGxvd2VkIChzZWUgQ1NQKVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXctZnVuY1xuICAgIGcgPSB0aGlzIHx8IG5ldyBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiKSB7XG4gICAgICByZXR1cm4gd2luZG93O1xuICAgIH1cblxuICAgIC8vIFRoaXMgd29ya3MgaWYgdGhlIHNlbGYgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxuICAgIGlmICh0eXBlb2Ygc2VsZiA9PT0gXCJvYmplY3RcIikge1xuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gVGhpcyB3b3JrcyBpZiB0aGUgZ2xvYmFsIHJlZmVyZW5jZSBpcyBhdmFpbGFibGVcbiAgICBpZiAodHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgcmV0dXJuIGdsb2JhbDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGc7XG59KCk7IiwiZnVuY3Rpb24gYW52aWxTYXZlKGlucHV0KSB7XHJcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oaW5wdXQsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlucHV0KS52YWx1ZSk7XHJcbiAgY2FsY0FudmlsKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNhbGNBbnZpbCgpIHtcclxuICB2YXIgbml0cm8gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImFudmlsLW5pdHJvLXNwZWVkXCIpO1xyXG5cclxuICBmb3IgKGxldCBpID0gMTsgaSA8PSAxMDsgaSsrKSB7XHJcbiAgICBsZXQgaWQgPSBcImFudmlsLWR1bmdlb24tXCIgKyBpICsgXCItdGltZVwiO1xyXG4gICAgbGV0IHZhbHVlID0gXCJhbnZpbC1kdW5nZW9uLVwiICsgaSArIFwiLXZhbHVlXCI7XHJcbiAgICBsZXQgdGltZSA9IFwiYW52aWwtZHVuZ2Vvbi1cIiArIGkgKyBcIi10aW1lXCI7XHJcbiAgICBsZXQgb3JiID0gXCJhbnZpbC1kdW5nZW9uLVwiICsgaSArIFwiLW9yYlwiO1xyXG4gICAgbGV0IHJld2FyZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxyXG4gICAgICBcImFudmlsLWR1bmdlb24tXCIgKyBpICsgXCItcmV3YXJkXCJcclxuICAgICkuaW5uZXJIVE1MO1xyXG5cclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKS52YWx1ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGlkKTtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHZhbHVlKS5pbm5lckhUTUwgPSBNYXRoLnJvdW5kKFxyXG4gICAgICAoMzYwMCAvIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRpbWUpLnZhbHVlKSAqIHJld2FyZCAqIG5pdHJvXHJcbiAgICApO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQob3JiKS5pbm5lckhUTUwgPSBNYXRoLnJvdW5kKFxyXG4gICAgICAoMzYwMCAvIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRpbWUpLnZhbHVlKSAqIG5pdHJvXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLy8gbGlzdC5mb3JFYWNoKG15RnVuY3Rpb24pO1xyXG4gIC8vIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYW52aWwtZm94LWR1bmdlb24tMS10aW1lJykgJiYgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FudmlsLWZveC1kdW5nZW9uLTEtdGltZScpLnZhbHVlICE9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhbnZpbC1mb3gtZHVuZ2Vvbi0xLXRpbWUnKSkge1xyXG4gIC8vICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FudmlsLWZveC1kdW5nZW9uLTEtdGltZScpLnZhbHVlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FudmlsLWZveC1kdW5nZW9uLTEtdGltZScpO1xyXG4gIC8vIH1cclxuICAvLyBlbHNlIHtsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYW52aWwtZm94LWR1bmdlb24tMS10aW1lJywgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FudmlsLWZveC1kdW5nZW9uLTEtdGltZScpLnZhbHVlKTt9XHJcblxyXG4gIC8vICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYW52aWwtZm94LWR1bmdlb24tMS12YWx1ZScpLmlubmVySFRNTCA9IDM2MDAgLyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYW52aWwtZm94LWR1bmdlb24tMS10aW1lJykudmFsdWU7XHJcbn1cclxuXHJcbmV4cG9ydCB7IGNhbGNBbnZpbCwgYW52aWxTYXZlIH07XHJcbiIsIi8vIGRlYnVnXHJcbmZ1bmN0aW9uIHJlc3RhcnQoKSB7XHJcbiAgd2luZG93LmxvY2FsU3RvcmFnZS5jbGVhcigpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjdXJyZW50VGFiKGlucHV0KSB7XHJcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJzZXR0aW5nLWN1cnJlbnRUYWJcIiwgaW5wdXQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzaWdtYShsb3dlckJvdW5kLCB1cHBlckJvdW5kLCBpdGVyYXRvciwgYWNjdW11bGF0b3IgPSAwKSB7XHJcbiAgLy8gbGV0IGFjY3VtdWxhdG9yID0gMDtcclxuICBmb3IgKGxldCBpID0gbG93ZXJCb3VuZDsgaSA8PSB1cHBlckJvdW5kOyArK2kpIHtcclxuICAgIGFjY3VtdWxhdG9yICs9IGl0ZXJhdG9yKGkpO1xyXG4gIH1cclxuICByZXR1cm4gYWNjdW11bGF0b3I7XHJcbn1cclxuXHJcbi8vIGNvbnZlcnQgbm9ybWFsIG51bWJlciB0byBLLE0sQixUIGFuZCBleHBvbmVudGlhbFxyXG5mdW5jdGlvbiBjb252ZXJ0KGlucHV0KSB7XHJcbiAgaW5wdXQgPSBwYXJzZUZsb2F0KGlucHV0KTtcclxuICB2YXIgb3V0cHV0ID0gMDtcclxuICBpZiAoaW5wdXQgPT0gMCkge1xyXG4gICAgb3V0cHV0ID0gMDtcclxuICB9IGVsc2UgaWYgKGlucHV0IDw9IDEwMDAwKSB7XHJcbiAgICBvdXRwdXQgPSBNYXRoLnJvdW5kKGlucHV0KTtcclxuICB9IGVsc2UgaWYgKGlucHV0IDwgMTAwMDAwMCkge1xyXG4gICAgb3V0cHV0ID0gKGlucHV0IC8gMTAwMCkudG9GaXhlZCgyKSArIFwiS1wiO1xyXG4gIH0gZWxzZSBpZiAoaW5wdXQgPCAxMDAwMDAwMDAwKSB7XHJcbiAgICBvdXRwdXQgPSAoaW5wdXQgLyAxMDAwMDAwKS50b0ZpeGVkKDIpICsgXCJNXCI7XHJcbiAgfSBlbHNlIGlmIChpbnB1dCA8IDEwMDAwMDAwMDAwMDApIHtcclxuICAgIG91dHB1dCA9IChpbnB1dCAvIDEwMDAwMDAwMDApLnRvRml4ZWQoMykgKyBcIkJcIjtcclxuICB9IGVsc2UgaWYgKGlucHV0IDwgMTAwMDAwMDAwMDAwMDAwMCkge1xyXG4gICAgb3V0cHV0ID0gKGlucHV0IC8gMTAwMDAwMDAwMDAwMCkudG9GaXhlZCgyKSArIFwiVFwiO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBvdXRwdXQgPSBpbnB1dC50b0V4cG9uZW50aWFsKDIpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIG91dHB1dDtcclxufVxyXG5cclxuLy8gY29udmVydCBrLG0sYix0IHRvIG5vcm1hbCBudW1iZXJzXHJcbmZ1bmN0aW9uIGNvbnZlcnQyKGlucHV0KSB7XHJcbiAgaWYgKC9eXFxkKlxcLj9cXGQrJC8udGVzdChpbnB1dCkpIHtcclxuICAgIHJldHVybiBNYXRoLnJvdW5kKGlucHV0KTtcclxuICB9IC8vIHJldHVybiByb3VuZGVkIG51bWJlciBpZiB0aGVyZSBpcyBubyBhYmJyZXZpZXRlXHJcbiAgZWxzZSB7XHJcbiAgICBjb25zdCByZWdleCA9IC8oLiopKFxcRCkkL2dtO1xyXG4gICAgaW5wdXQgPSBpbnB1dC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgaW5wdXQgPSBpbnB1dC5yZXBsYWNlKC8gL2csIFwiXCIpOyAvL3JlbW92ZXMgYWxsIHNwYWNlc1xyXG4gICAgaW5wdXQgPSByZWdleC5leGVjKGlucHV0KTtcclxuICAgIGxldCBvdXRwdXQgPSAwO1xyXG4gICAgaWYgKGlucHV0WzJdID09IFwidFwiKSB7XHJcbiAgICAgIG91dHB1dCA9IGlucHV0WzFdICogMTAwMCAqKiA0O1xyXG4gICAgfSBlbHNlIGlmIChpbnB1dFsyXSA9PSBcImJcIikge1xyXG4gICAgICBvdXRwdXQgPSBpbnB1dFsxXSAqIDEwMDAgKiogMztcclxuICAgIH0gZWxzZSBpZiAoaW5wdXRbMl0gPT0gXCJtXCIpIHtcclxuICAgICAgb3V0cHV0ID0gaW5wdXRbMV0gKiAxMDAwICoqIDI7XHJcbiAgICB9IGVsc2UgaWYgKGlucHV0WzJdID09IFwia1wiKSB7XHJcbiAgICAgIG91dHB1dCA9IGlucHV0WzFdICogMTAwMCAqKiAxO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBvdXRwdXQ7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBjb252ZXJ0LCBjb252ZXJ0Miwgc2lnbWEsIHJlc3RhcnQsIGN1cnJlbnRUYWIgfTtcclxuIiwiZnVuY3Rpb24gZXhwZWRpdGlvblNhdmUoaW5wdXQpIHtcclxuICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaW5wdXQpLnR5cGUgPT0gXCJ0ZXh0XCIpIHtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGlucHV0LCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpbnB1dCkudmFsdWUpO1xyXG4gICAgLy8gY29uc29sZS5sb2coJ3RleHQnKTtcclxuICB9IGVsc2UgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlucHV0KS50eXBlID09IFwiY2hlY2tib3hcIikge1xyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oaW5wdXQsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlucHV0KS5jaGVja2VkKTtcclxuXHJcbiAgICAvLyBjb25zb2xlLmxvZygnY2hlY2tib3gnKTtcclxuICAgIC8vIGNvbnNvbGUubG9nKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlucHV0KS5jaGVja2VkKTtcclxuICAgIC8vIGNvbnNvbGUubG9nKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGlucHV0KSk7XHJcbiAgfVxyXG5cclxuICAvLyBjb25zb2xlLmxvZyhpbnB1dCk7XHJcbiAgY2FsY0V4cGVkaXRpb24oKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZXhwZWRpdGlvbkxvYWQoKSB7XHJcbiAgbGV0IHNwZWVkQm9udXMxID0gXCJleHBlZGl0aW9uLXNwZWVkLWJvbnVzLTFcIjtcclxuICBsZXQgc3BlZWRCb251czIgPSBcImV4cGVkaXRpb24tc3BlZWQtYm9udXMtMlwiO1xyXG4gIGxldCBzcGVlZEJvbnVzMyA9IFwiZXhwZWRpdGlvbi1zcGVlZC1ib251cy0zXCI7XHJcblxyXG4gIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShzcGVlZEJvbnVzMSkgPT09IG51bGwpIHtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHNwZWVkQm9udXMxLCAxMDApO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzcGVlZEJvbnVzMSkudmFsdWUgPVxyXG4gICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShzcGVlZEJvbnVzMSk7XHJcbiAgfVxyXG4gIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShzcGVlZEJvbnVzMikgPT09IG51bGwpIHtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFxyXG4gICAgICBzcGVlZEJvbnVzMixcclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc3BlZWRCb251czIpLmNoZWNrZWRcclxuICAgICk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNwZWVkQm9udXMyKS5jaGVja2VkID1cclxuICAgICAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oc3BlZWRCb251czIpID09PSBcInRydWVcIjtcclxuICB9XHJcbiAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKHNwZWVkQm9udXMzKSA9PT0gbnVsbCkge1xyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oc3BlZWRCb251czMsIGZhbHNlKTtcclxuICB9IGVsc2Uge1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc3BlZWRCb251czMpLmNoZWNrZWQgPVxyXG4gICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShzcGVlZEJvbnVzMykgPT09IFwidHJ1ZVwiO1xyXG4gIH1cclxuXHJcbiAgY2FsY0V4cGVkaXRpb24oKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY2FsY0V4cGVkaXRpb24oKSB7XHJcbiAgLy8gdmFyIG5pdHJvID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FudmlsLW5pdHJvLXNwZWVkJyk7XHJcbiAgbGV0IHNwZWVkQm9udXMxID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJleHBlZGl0aW9uLXNwZWVkLWJvbnVzLTFcIik7XHJcbiAgbGV0IHNwZWVkQm9udXMyID0gXCJleHBlZGl0aW9uLXNwZWVkLWJvbnVzLTJcIjtcclxuICBsZXQgc3BlZWRCb251czMgPSBcImV4cGVkaXRpb24tc3BlZWQtYm9udXMtM1wiO1xyXG4gIGxldCB0b3RhbFNwZWVkID0gMDtcclxuICAvLyBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oc3BlZWRCb251czEpID09PSBudWxsKSB7bG9jYWxTdG9yYWdlLnNldEl0ZW0oc3BlZWRCb251czEsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNwZWVkQm9udXMxKS5jaGVja2VkKTt9XHJcbiAgLy8gZWxzZSB7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc3BlZWRCb251czEpLmNoZWNrZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShzcGVlZEJvbnVzMSk7fVxyXG4gIGxldCBzcGVlZFRhYmxlID0gW1xyXG4gICAgWzEwNi41MTksIFwiNDguMGhcIl0sXHJcbiAgICBbNjguMDE0LCBcIjI0LjBoXCJdLFxyXG4gICAgWzM1LjQ5NSwgXCIxNi4waFwiXSxcclxuICAgIFsxNy43NTksIFwiOC4waFwiXSxcclxuICAgIFs4Ljg3NywgXCI0LjBoXCJdLFxyXG4gICAgWzQuNDM5LCBcIjIuMGhcIl0sXHJcbiAgICBbMi4yLCBcIjEuMGhcIl0sXHJcbiAgXTtcclxuICAvLyBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oc3BlZWRCb251czIpID09IHRydWUpIHt0b3RhbFNwZWVkICs9IDE7fVxyXG5cclxuICBmb3IgKGxldCBpID0gMTsgaSA8PSA4OyBpKyspIHtcclxuICAgIGxldCBsZXZlbCA9IFwiZXhwZWRpdGlvbi10ZWFtLVwiICsgaSArIFwiLWxldmVsXCI7XHJcbiAgICBsZXQgc3BlZWQgPSBcImV4cGVkaXRpb24tdGVhbS1cIiArIGkgKyBcIi1zcGVlZFwiO1xyXG4gICAgbGV0IHRpbWUgPSBcImV4cGVkaXRpb24tdGVhbS1cIiArIGkgKyBcIi10aW1lXCI7XHJcblxyXG4gICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGxldmVsKSA9PT0gbnVsbCkge1xyXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShsZXZlbCwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobGV2ZWwpLnZhbHVlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxldmVsKS52YWx1ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGxldmVsKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyAgIHJld2FyZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbnZpbC1kdW5nZW9uLScgKyBpICsgJy1yZXdhcmQnKS5pbm5lckhUTUw7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChsZXZlbCkudmFsdWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShsZXZlbCk7XHJcbiAgICBsZXQgYmFzZVNwZWVkID0gMSArIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxldmVsKS52YWx1ZSAqIDAuMDAxO1xyXG4gICAgLy8gdG90YWxTcGVlZCA9IGJhc2VTcGVlZCA7XHJcbiAgICBsZXQgdG90YWxTcGVlZCA9IChiYXNlU3BlZWQgKiBzcGVlZEJvbnVzMSkgLyAxMDA7XHJcbiAgICAvLyBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oc3BlZWRCb251czIpID09PSAndHJ1ZScpIHt0b3RhbFNwZWVkICs9IDE7fVxyXG4gICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKHNwZWVkQm9udXMyKSA9PSBcInRydWVcIikge1xyXG4gICAgICB0b3RhbFNwZWVkICs9ICgoYmFzZVNwZWVkICogc3BlZWRCb251czEpIC8gMTAwKSAqIDAuMjU7XHJcbiAgICB9XHJcbiAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oc3BlZWRCb251czMpID09IFwidHJ1ZVwiKSB7XHJcbiAgICAgIHRvdGFsU3BlZWQgKz0gKChiYXNlU3BlZWQgKiBzcGVlZEJvbnVzMSkgLyAxMDApICogMC4yNTtcclxuICAgIH1cclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNwZWVkVGFibGUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgaWYgKHRvdGFsU3BlZWQgPj0gc3BlZWRUYWJsZVtpXVswXSkge1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRpbWUpLmlubmVySFRNTCA9IHNwZWVkVGFibGVbaV1bMV07XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGltZSkuaW5uZXJIVE1MID0gXCIwLjVoXCI7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhzcGVlZFRhYmxlKSkge1xyXG4gICAgLy8gICBpZiAodG90YWxTcGVlZCA+IGtleSkge1xyXG4gICAgLy8gICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRpbWUpLmlubmVySFRNTCA9IHZhbHVlO1xyXG4gICAgLy8gICB9XHJcbiAgICAvLyAgIGNvbnNvbGUubG9nKGAke2tleX06ICR7dmFsdWV9YCk7XHJcbiAgICAvLyB9XHJcblxyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc3BlZWQpLmlubmVySFRNTCA9IHRvdGFsU3BlZWQudG9GaXhlZCgzKTtcclxuICAgIC8vICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQob3JiKS5pbm5lckhUTUwgPSBNYXRoLnJvdW5kKDM2MDAgLyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aW1lKS52YWx1ZSAqIG5pdHJvKSA7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiB0ZXN0RXhwZWRpdGlvbigpIHtcclxuICByZXR1cm4gXCJ0ZXN0RXhwZWRpdGlvblwiO1xyXG59XHJcblxyXG5leHBvcnQgeyBleHBlZGl0aW9uU2F2ZSwgZXhwZWRpdGlvbkxvYWQsIGNhbGNFeHBlZGl0aW9uLCB0ZXN0RXhwZWRpdGlvbiB9O1xyXG4iLCJjb25zdCBmaWxlID0gXCJibGFoLnR4dFwiO1xyXG5jb25zdCBoZWxwZXJzID0ge1xyXG4gIHRlc3Q6IGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnNvbGUubG9nKFwidGVzdCBzb21ldGhpbmdcIik7XHJcbiAgfSxcclxuICBwYXJzZTogZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc29sZS5sb2coXCJwYXJzZSBzb21ldGhpbmdcIik7XHJcbiAgfSxcclxufTtcclxuIiwiLy8gaW1wb3J0IHsgY29udmVydCwgY29udmVydDIsIHNpZ21hLCByZXN0YXJ0LCBjdXJyZW50VGFiIH0gZnJvbSBcIi4vY29tbW9uLmpzXCI7XHJcbmltcG9ydCB7IGNhbGNBbnZpbCB9IGZyb20gXCIuL2FudmlsLmpzXCI7XHJcbmltcG9ydCB7IGV4cGVkaXRpb25Mb2FkIH0gZnJvbSBcIi4vZXhwZWRpdGlvbi5qc1wiO1xyXG5cclxuaW1wb3J0IHtcclxuICBzbGltZUJhbmtTbGltZUNvaW5DYXAxLFxyXG4gIHNsaW1lQmFua1NsaW1lQ29pbkNhcDIsXHJcbiAgc2xpbWVCYW5rUmVzZWFyY2hTdG9uZSxcclxuICBzbGltZUJhbmtSZXNlYXJjaExlYWYsXHJcbn0gZnJvbSBcIi4vc2xpbWViYW5rLmpzXCI7XHJcblxyXG5mdW5jdGlvbiBsb2FkKCkge1xyXG4gIC8vIGN1cnJlbnQgdGFiXHJcbiAgdmFyIHRhYiA9IDA7XHJcbiAgY29uc3QgdGFiX2xpc3QgPSBbXCJzbGltZS1iYW5rXCIsIFwibGFiXCIsIFwiYW52aWxcIiwgXCJleHBlZGl0aW9uXCJdO1xyXG4gIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInNldHRpbmctY3VycmVudFRhYlwiKSkge1xyXG4gICAgdGFiX2xpc3QuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgICB0YWIgPSBlbGVtZW50ICsgXCItY2FsY3VsYXRvclwiO1xyXG4gICAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJzZXR0aW5nLWN1cnJlbnRUYWJcIikgPT0gZWxlbWVudCkge1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhYikuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50KS5zdHlsZS5jb2xvciA9IFwiI2YyZTAwOVwiO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhYikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9IGVsc2Uge1xyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJzZXR0aW5nLWN1cnJlbnRUYWJcIiwgXCJzbGltZS1iYW5rXCIpO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzbGltZS1iYW5rXCIpLnN0eWxlLmNvbG9yID0gXCIjZjJlMDA5XCI7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxhYi1jYWxjdWxhdG9yXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYW52aWwtY2FsY3VsYXRvclwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImV4cGVkaXRpb24tY2FsY3VsYXRvclwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgfVxyXG4gIC8vIEFudmlsIGxvYWRpbmdcclxuICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJhbnZpbC1uaXRyby1zcGVlZFwiKSA9PT0gbnVsbCkge1xyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJhbnZpbC1uaXRyby1zcGVlZFwiLCAxKTtcclxuICB9IGVsc2Uge1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbnZpbC1uaXRyby1zcGVlZFwiKS52YWx1ZSA9XHJcbiAgICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiYW52aWwtbml0cm8tc3BlZWRcIik7XHJcbiAgfVxyXG4gIC8vIGFudmlsIGxvYWQgbmVlZCByZWZhY3RvclxyXG5cclxuICBmb3IgKGxldCBpID0gMTsgaSA8PSAxMDsgaSsrKSB7XHJcbiAgICB2YXIgaWQgPSAwO1xyXG4gICAgaWQgPSBcImFudmlsLWR1bmdlb24tXCIgKyBpICsgXCItdGltZVwiO1xyXG4gICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGlkKSA9PT0gbnVsbCkge1xyXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShpZCwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpLnZhbHVlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKS52YWx1ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGlkKTtcclxuICAgIH1cclxuICB9XHJcbiAgY2FsY0FudmlsKCk7XHJcbiAgLy8gY2FsY0V4cGVkaXRpb24oKTtcclxuICBleHBlZGl0aW9uTG9hZCgpO1xyXG4gIC8vIGxvYWRpbmcgdmFsdWVzIGZyb20gbG9jYWxTdG9yYWdlIGVsc2Ugc2V0dGluZyB2YWx1ZXMgYXMgMFxyXG4gIC8vIGNvbnN0IGxpc3QgPSBbXHJcbiAgLy8gICAnYW52aWwtZm94LWR1bmdlb24tMS10aW1lJywgJ2FudmlsLWZveC1kdW5nZW9uLTItdGltZScsICdhbnZpbC1mb3gtZHVuZ2Vvbi0zLXRpbWUnLFxyXG4gIC8vICdhbnZpbC1mb3gtZHVuZ2Vvbi00LXRpbWUnLCAnYW52aWwtZm94LWR1bmdlb24tNS10aW1lJywnYW52aWwtYmF0LWR1bmdlb24tMS10aW1lJywnYW52aWwtYmF0LWR1bmdlb24tMi10aW1lJyxcclxuICAvLyAnYW52aWwtYmF0LWR1bmdlb24tMy10aW1lJywnYW52aWwtYmF0LWR1bmdlb24tNC10aW1lJywnYW52aWwtYmF0LWR1bmdlb24tNS10aW1lJ107XHJcbiAgLy8gY29uc3QgaXRlbXMgPSB7IC4uLmxvY2FsU3RvcmFnZSB9O1xyXG4gIC8vIGNvbnNvbGUubG9nKGl0ZW1zKTtcclxuICAvLyBsaXN0LmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgLy8gIGNvbnNvbGUubG9nKGVsZW1lbnQpO1xyXG4gIC8vICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oZWxlbWVudCkgPT09IG51bGwpIHtzbGltZUJhbmtSZXNlYXJjaFN0b25lKDApO31cclxuICAvLyAgZWxzZSB7c2xpbWVCYW5rUmVzZWFyY2hTdG9uZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2xpbWUtYmFuay1yZXNlYXJjaC1zdG9uZS1sZXZlbCcpKTt9XHJcbiAgLy8gfSk7XHJcblxyXG4gIC8vIFNsaW1lIEJhbmsgbG9hZGluZ1xyXG4gIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInNsaW1lLWJhbmstcmVzZWFyY2gtc3RvbmUtbGV2ZWxcIikgPT09IG51bGwpIHtcclxuICAgIHNsaW1lQmFua1Jlc2VhcmNoU3RvbmUoMCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHNsaW1lQmFua1Jlc2VhcmNoU3RvbmUoXHJcbiAgICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwic2xpbWUtYmFuay1yZXNlYXJjaC1zdG9uZS1sZXZlbFwiKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInNsaW1lLWJhbmstcmVzZWFyY2gtbGVhZi1sZXZlbFwiKSA9PT0gbnVsbCkge1xyXG4gICAgc2xpbWVCYW5rUmVzZWFyY2hMZWFmKDApO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBzbGltZUJhbmtSZXNlYXJjaExlYWYoXHJcbiAgICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwic2xpbWUtYmFuay1yZXNlYXJjaC1sZWFmLWxldmVsXCIpXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgaWYgKFxyXG4gICAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJzbGltZS1iYW5rLXVwZ3JhZGUtc2xpbWUtY29pbi1jYXAtMS1sZXZlbFwiKSA9PT0gbnVsbFxyXG4gICkge1xyXG4gICAgc2xpbWVCYW5rU2xpbWVDb2luQ2FwMSgwKTtcclxuICB9IGVsc2Uge1xyXG4gICAgc2xpbWVCYW5rU2xpbWVDb2luQ2FwMShcclxuICAgICAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJzbGltZS1iYW5rLXVwZ3JhZGUtc2xpbWUtY29pbi1jYXAtMS1sZXZlbFwiKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGlmIChcclxuICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwic2xpbWUtYmFuay11cGdyYWRlLXNsaW1lLWNvaW4tY2FwLTItbGV2ZWxcIikgPT09IG51bGxcclxuICApIHtcclxuICAgIHNsaW1lQmFua1NsaW1lQ29pbkNhcDIoMCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHNsaW1lQmFua1NsaW1lQ29pbkNhcDIoXHJcbiAgICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwic2xpbWUtYmFuay11cGdyYWRlLXNsaW1lLWNvaW4tY2FwLTItbGV2ZWxcIilcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvLyBzbGltZUJhbmtTbGltZUNvaW5DYXBUb3RhbCgpO1xyXG4gIC8vIHNsaW1lQmFua0ludHJlc3QoKTtcclxuICAvLyBzbGltZUJhbmtPcHRpbWlzZXIoKTtcclxuICAvLyBkZWJ1Z1xyXG4gIC8vIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHsgLi4ubG9jYWxTdG9yYWdlIH0pKSB7XHJcbiAgLy8gICAvLyBjb25zb2xlLmxvZyhgJHtrZXl9OiAke3ZhbHVlfWApO1xyXG4gIC8vICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RlYnVnJykuaW5uZXJIVE1MICs9IGA8aT4ke2tleX06PC9pPiA8Yj4ke3ZhbHVlfTwvYj48YnI+YDtcclxuICAvLyB9XHJcbn1cclxuXHJcbmV4cG9ydCB7IGxvYWQgfTtcclxuIiwiaW1wb3J0IHsgY29udmVydCwgY29udmVydDIsIHNpZ21hIH0gZnJvbSBcIi4vY29tbW9uLmpzXCI7XHJcbi8vIFNsaW1lIEJhbmsgZnVuY3Rpb25zXHJcblxyXG5mdW5jdGlvbiBzbGltZUJhbmtTbGltZUNvaW5DYXBUb3RhbCgpIHtcclxuICBsZXQgb3V0cHV0ID1cclxuICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwic2xpbWUtYmFuay11cGdyYWRlLXNsaW1lLWNvaW4tY2FwLTEtdmFsdWVcIikgKlxyXG4gICAgKChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInNsaW1lLWJhbmstcmVzZWFyY2gtbGVhZi1sZXZlbFwiKSAqIDIgKyAxMDApIC8gMTAwKSAqXHJcbiAgICAobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJzbGltZS1iYW5rLXVwZ3JhZGUtc2xpbWUtY29pbi1jYXAtMi12YWx1ZVwiKSAvIDEwMCk7XHJcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJzbGltZS1iYW5rLXNsaW1lLWNvaW4tY2FwLXRvdGFsXCIsIG91dHB1dCk7XHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzbGltZS1iYW5rLXNsaW1lLWNvaW4tY2FwLXZhbHVlXCIpLmlubmVySFRNTCA9XHJcbiAgICBjb252ZXJ0KG91dHB1dCk7XHJcbiAgc2xpbWVCYW5rSW50cmVzdCgpO1xyXG4gIHNsaW1lQmFua09wdGltaXNlcigpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzbGltZUJhbmtJbnRyZXN0KCkge1xyXG4gIGxldCBpbnRyZXN0ID1cclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2xpbWUtYmFuay1yZXNlYXJjaC1zdG9uZS1sZXZlbFwiKS52YWx1ZSAqXHJcbiAgICAwLjAwMSAqXHJcbiAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInNsaW1lLWJhbmstc2xpbWUtY29pbi1jYXAtdG90YWxcIik7XHJcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJzbGltZS1iYW5rLWludHJlc3RcIiwgaW50cmVzdCk7XHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzbGltZS1iYW5rLWludHJlc3RcIikuaW5uZXJIVE1MID0gY29udmVydChpbnRyZXN0KTtcclxuICBzbGltZUJhbmtPcHRpbWlzZXIoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2xpbWVCYW5rT3B0aW1pc2VyKCkge1xyXG4gIGxldCBzbGltZV9jb2luX2NhcF8xX2xldmVsID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXHJcbiAgICBcInNsaW1lLWJhbmstdXBncmFkZS1zbGltZS1jb2luLWNhcC0xLWxldmVsXCJcclxuICApO1xyXG4gIGxldCBpbnRyZXN0ID1cclxuICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwic2xpbWUtYmFuay1pbnRyZXN0XCIpIC1cclxuICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwic2xpbWUtYmFuay1pbnRyZXN0XCIpICogMC4xO1xyXG4gIGxldCBzbGltZV9jb2luX2NhcF8xX2Nvc3Q7XHJcblxyXG4gIGlmIChzbGltZV9jb2luX2NhcF8xX2xldmVsID49IDEwMDAwMDAwMDApIHtcclxuICAgIHNsaW1lX2NvaW5fY2FwXzFfY29zdCA9IDEwMDAwMDAwMDAwMDAwMDAwO1xyXG4gIH0gLy8gMS4wMCtFMTZcclxuICBlbHNlIGlmIChzbGltZV9jb2luX2NhcF8xX2xldmVsID49IDUwMDAwMDAwMCkge1xyXG4gICAgc2xpbWVfY29pbl9jYXBfMV9jb3N0ID0gMTAwMDAwMDAwMDAwMDAwMDtcclxuICB9IC8vIDEuMDArRTE1XHJcbiAgZWxzZSBpZiAoc2xpbWVfY29pbl9jYXBfMV9sZXZlbCA+PSAxMDAwMDAwMDApIHtcclxuICAgIHNsaW1lX2NvaW5fY2FwXzFfY29zdCA9IDEwMDAwMDAwMDAwMDAwMDtcclxuICB9IC8vIDEwMFRcclxuICBlbHNlIGlmIChzbGltZV9jb2luX2NhcF8xX2xldmVsID49IDUwMDAwMDAwKSB7XHJcbiAgICBzbGltZV9jb2luX2NhcF8xX2Nvc3QgPSAxMDAwMDAwMDAwMDAwMDtcclxuICB9IC8vIDEwVFxyXG4gIGVsc2UgaWYgKHNsaW1lX2NvaW5fY2FwXzFfbGV2ZWwgPj0gMTAwMDAwMDApIHtcclxuICAgIHNsaW1lX2NvaW5fY2FwXzFfY29zdCA9IDEwMDAwMDAwMDAwMDA7XHJcbiAgfSAvLyAxVFxyXG4gIGVsc2Uge1xyXG4gICAgc2xpbWVfY29pbl9jYXBfMV9jb3N0ID1cclxuICAgICAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJzbGltZS1iYW5rLXVwZ3JhZGUtc2xpbWUtY29pbi1jYXAtMS1sZXZlbFwiKSAqXHJcbiAgICAgICAgMTAwMDAgK1xyXG4gICAgICAxMDAwMDtcclxuICB9IC8vIG5lZWQgdG8gZmluZCBzb2x1dGlvbiBmb3IgbGVzcyB0aGFuIDEwTSB1cGdyYWRlc1xyXG5cclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNsaW1lLWJhbmstdXBncmFkZS1zbGltZS1jb2luLWNhcC0xLWNvc3RcIikudmFsdWUgPVxyXG4gICAgY29udmVydChzbGltZV9jb2luX2NhcF8xX2Nvc3QpO1xyXG4gIGxldCBvdXRwdXQgPSBNYXRoLnJvdW5kKGludHJlc3QgLyBzbGltZV9jb2luX2NhcF8xX2Nvc3QpO1xyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2xpbWUtYmFuay1vcHRpbWlzZXJcIikuaW5uZXJIVE1MID0gb3V0cHV0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBzbGltZUJhbmtTbGltZUNvaW5DYXAxKGlucHV0KSB7XHJcbiAgaW5wdXQgPSBjb252ZXJ0MihpbnB1dCk7XHJcblxyXG4gIGlmIChcclxuICAgIGlucHV0ICE9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwic2xpbWUtYmFuay11cGdyYWRlLXNsaW1lLWNvaW4tY2FwLTEtbGV2ZWxcIilcclxuICApIHtcclxuICAgIGxldCBvdXRwdXQgPSBzaWdtYShcclxuICAgICAgMCxcclxuICAgICAgaW5wdXQsXHJcbiAgICAgIGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgcmV0dXJuIGEgKiAyMCAtIDEwICsgMTAwMDA7XHJcbiAgICAgIH0sXHJcbiAgICAgIDEwXHJcbiAgICApO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHJcbiAgICAgIFwic2xpbWUtYmFuay11cGdyYWRlLXNsaW1lLWNvaW4tY2FwLTEtdmFsdWVcIlxyXG4gICAgKS5pbm5lckhUTUwgPSBjb252ZXJ0KG91dHB1dCk7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInNsaW1lLWJhbmstdXBncmFkZS1zbGltZS1jb2luLWNhcC0xLWxldmVsXCIsIGlucHV0KTtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwic2xpbWUtYmFuay11cGdyYWRlLXNsaW1lLWNvaW4tY2FwLTEtdmFsdWVcIiwgb3V0cHV0KTtcclxuICB9IGVsc2Uge1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHJcbiAgICAgIFwic2xpbWUtYmFuay11cGdyYWRlLXNsaW1lLWNvaW4tY2FwLTEtdmFsdWVcIlxyXG4gICAgKS5pbm5lckhUTUwgPSBjb252ZXJ0KFxyXG4gICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInNsaW1lLWJhbmstdXBncmFkZS1zbGltZS1jb2luLWNhcC0xLXZhbHVlXCIpXHJcbiAgICApO1xyXG4gIH1cclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNsaW1lLWJhbmstdXBncmFkZS1zbGltZS1jb2luLWNhcC0xLWxldmVsXCIpLnZhbHVlID1cclxuICAgIGNvbnZlcnQobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJzbGltZS1iYW5rLXVwZ3JhZGUtc2xpbWUtY29pbi1jYXAtMS1sZXZlbFwiKSk7XHJcbiAgc2xpbWVCYW5rU2xpbWVDb2luQ2FwVG90YWwoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2xpbWVCYW5rU2xpbWVDb2luQ2FwMihpbnB1dCkge1xyXG4gIGxldCBvdXRwdXQgPSBzaWdtYShcclxuICAgIDAsXHJcbiAgICBpbnB1dCxcclxuICAgIGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgIHJldHVybiBhICogMjAgLSAxMDtcclxuICAgIH0sXHJcbiAgICAxMFxyXG4gICk7XHJcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJzbGltZS1iYW5rLXVwZ3JhZGUtc2xpbWUtY29pbi1jYXAtMi1sZXZlbFwiLCBpbnB1dCk7XHJcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXHJcbiAgICBcInNsaW1lLWJhbmstdXBncmFkZS1zbGltZS1jb2luLWNhcC0yLXZhbHVlXCIsXHJcbiAgICBvdXRwdXQgKyAxMDBcclxuICApO1xyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxyXG4gICAgXCJzbGltZS1iYW5rLXVwZ3JhZGUtc2xpbWUtY29pbi1jYXAtMi12YWx1ZVwiXHJcbiAgKS5pbm5lckhUTUwgPSBjb252ZXJ0KG91dHB1dCArIDEwMCk7XHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzbGltZS1iYW5rLXVwZ3JhZGUtc2xpbWUtY29pbi1jYXAtMi1sZXZlbFwiKS52YWx1ZSA9XHJcbiAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInNsaW1lLWJhbmstdXBncmFkZS1zbGltZS1jb2luLWNhcC0yLWxldmVsXCIpO1xyXG4gIHNsaW1lQmFua1NsaW1lQ29pbkNhcFRvdGFsKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNsaW1lQmFua1Jlc2VhcmNoU3RvbmUoaW5wdXQpIHtcclxuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInNsaW1lLWJhbmstcmVzZWFyY2gtc3RvbmUtbGV2ZWxcIiwgaW5wdXQpO1xyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2xpbWUtYmFuay1yZXNlYXJjaC1zdG9uZS1sZXZlbFwiKS52YWx1ZSA9XHJcbiAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInNsaW1lLWJhbmstcmVzZWFyY2gtc3RvbmUtbGV2ZWxcIik7XHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzbGltZS1iYW5rLXJlc2VhcmNoLXN0b25lLXZhbHVlXCIpLmlubmVySFRNTCA9ICsoXHJcbiAgICBpbnB1dCAqIDAuMVxyXG4gICkudG9GaXhlZCgyKTtcclxuICBzbGltZUJhbmtJbnRyZXN0KCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNsaW1lQmFua1Jlc2VhcmNoTGVhZihpbnB1dCkge1xyXG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwic2xpbWUtYmFuay1yZXNlYXJjaC1sZWFmLWxldmVsXCIsIGlucHV0KTtcclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNsaW1lLWJhbmstcmVzZWFyY2gtbGVhZi1sZXZlbFwiKS52YWx1ZSA9XHJcbiAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInNsaW1lLWJhbmstcmVzZWFyY2gtbGVhZi1sZXZlbFwiKTtcclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNsaW1lLWJhbmstcmVzZWFyY2gtbGVhZi12YWx1ZVwiKS5pbm5lckhUTUwgPVxyXG4gICAgKyhpbnB1dCAqIDIpLnRvRml4ZWQoMikgKyAxMDA7XHJcbiAgc2xpbWVCYW5rU2xpbWVDb2luQ2FwVG90YWwoKTtcclxufVxyXG5cclxuZXhwb3J0IHtcclxuICBzbGltZUJhbmtTbGltZUNvaW5DYXAxLFxyXG4gIHNsaW1lQmFua1NsaW1lQ29pbkNhcDIsXHJcbiAgc2xpbWVCYW5rUmVzZWFyY2hTdG9uZSxcclxuICBzbGltZUJhbmtSZXNlYXJjaExlYWYsXHJcbiAgc2xpbWVCYW5rSW50cmVzdCxcclxuICBzbGltZUJhbmtPcHRpbWlzZXIsXHJcbiAgc2xpbWVCYW5rU2xpbWVDb2luQ2FwVG90YWwsXHJcbn07XHJcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsIi8vIGltcG9ydCB7IGN1cnJlbnRUYWIgfSBmcm9tIFwiLi9jb21tb24uanNcIjtcclxuLy8gaW1wb3J0IHsgY3VycmVudFRhYiB9IGZyb20gXCJleHBvc2UtbG9hZGVyP2V4cG9zZXM9d2luZG93LiQgY3VycmVudFRhYlwiO1xyXG4vL1xyXG4vLyBBZGRzIHRoZSBganF1ZXJ5YCB0byB0aGUgZ2xvYmFsIG9iamVjdCB1bmRlciB0aGUgbmFtZXMgYCRgIGFuZCBgalF1ZXJ5YFxyXG5pbXBvcnQgeyBsb2FkIH0gZnJvbSBcIi4vbG9hZC5qc1wiO1xyXG5jb25zdCB7IGZpbGUsIHBhcnNlIH0gPSByZXF1aXJlKFwiLi9nbG9iYWxzLmpzXCIpO1xyXG5cclxuZnVuY3Rpb24gcmVhZHkoZm4pIHtcclxuICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSAhPSBcImxvYWRpbmdcIikge1xyXG4gICAgZm4oKTtcclxuICB9IGVsc2Uge1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZm4pO1xyXG4gIH1cclxufVxyXG5cclxucmVhZHkoZnVuY3Rpb24gKCkge1xyXG4gIC8vIHN0YXJ0IHVwIHlvdXIgYXBwXHJcbiAgbG9hZCgpO1xyXG4gIC8vIGNvbnNvbGUubG9nKGRvY3VtZW50LmJvZHkpO1xyXG4gIC8vIGNvbnN0IHh4eCA9IGN1cnJlbnRUYWIoKTtcclxufSk7XHJcbi8vIHRoaXMuYWxlcnQoXCJIbW1tLCB0aGlzIHByb2JhYmx5IGlzbid0IGEgZ3JlYXQgaWRlYS4uLlwiKTtcclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9