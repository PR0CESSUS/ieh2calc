(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["ieh2calc"] = factory();
	else
		root["ieh2calc"] = factory();
})(this, () => {
return /******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./src/common-exposed.js":
/*!*******************************!*\
  !*** ./src/common-exposed.js ***!
  \*******************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var ___EXPOSE_LOADER_IMPORT___ = __webpack_require__(/*! -!./common.js */ "./src/common.js");
var ___EXPOSE_LOADER_GET_GLOBAL_THIS___ = __webpack_require__(/*! ../node_modules/expose-loader/dist/runtime/getGlobalThis.js */ "./node_modules/expose-loader/dist/runtime/getGlobalThis.js");
var ___EXPOSE_LOADER_GLOBAL_THIS___ = ___EXPOSE_LOADER_GET_GLOBAL_THIS___;
var ___EXPOSE_LOADER_IMPORT_MODULE_LOCAL_NAME___ = ___EXPOSE_LOADER_IMPORT___.currentTab
if (typeof ___EXPOSE_LOADER_GLOBAL_THIS___["currentTab"] === 'undefined') ___EXPOSE_LOADER_GLOBAL_THIS___["currentTab"] = ___EXPOSE_LOADER_IMPORT_MODULE_LOCAL_NAME___;
else throw new Error('[exposes-loader] The "currentTab" value exists in the global scope, it may not be safe to overwrite it, use the "override" option')
var ___EXPOSE_LOADER_IMPORT_MODULE_LOCAL_NAME___ = ___EXPOSE_LOADER_IMPORT___.restart
if (typeof ___EXPOSE_LOADER_GLOBAL_THIS___["restart"] === 'undefined') ___EXPOSE_LOADER_GLOBAL_THIS___["restart"] = ___EXPOSE_LOADER_IMPORT_MODULE_LOCAL_NAME___;
else throw new Error('[exposes-loader] The "restart" value exists in the global scope, it may not be safe to overwrite it, use the "override" option')
module.exports = ___EXPOSE_LOADER_IMPORT___;


/***/ }),

/***/ "./src/expedition-exposed.js":
/*!***********************************!*\
  !*** ./src/expedition-exposed.js ***!
  \***********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var ___EXPOSE_LOADER_IMPORT___ = __webpack_require__(/*! -!./expedition.js */ "./src/expedition.js");
var ___EXPOSE_LOADER_GET_GLOBAL_THIS___ = __webpack_require__(/*! ../node_modules/expose-loader/dist/runtime/getGlobalThis.js */ "./node_modules/expose-loader/dist/runtime/getGlobalThis.js");
var ___EXPOSE_LOADER_GLOBAL_THIS___ = ___EXPOSE_LOADER_GET_GLOBAL_THIS___;
var ___EXPOSE_LOADER_IMPORT_MODULE_LOCAL_NAME___ = ___EXPOSE_LOADER_IMPORT___.expeditionSave
if (typeof ___EXPOSE_LOADER_GLOBAL_THIS___["expeditionSave"] === 'undefined') ___EXPOSE_LOADER_GLOBAL_THIS___["expeditionSave"] = ___EXPOSE_LOADER_IMPORT_MODULE_LOCAL_NAME___;
else throw new Error('[exposes-loader] The "expeditionSave" value exists in the global scope, it may not be safe to overwrite it, use the "override" option')
module.exports = ___EXPOSE_LOADER_IMPORT___;


/***/ }),

/***/ "./src/anvil-exposed.js":
/*!******************************!*\
  !*** ./src/anvil-exposed.js ***!
  \******************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var ___EXPOSE_LOADER_IMPORT___ = __webpack_require__(/*! -!./anvil.js */ "./src/anvil.js");
var ___EXPOSE_LOADER_GET_GLOBAL_THIS___ = __webpack_require__(/*! ../node_modules/expose-loader/dist/runtime/getGlobalThis.js */ "./node_modules/expose-loader/dist/runtime/getGlobalThis.js");
var ___EXPOSE_LOADER_GLOBAL_THIS___ = ___EXPOSE_LOADER_GET_GLOBAL_THIS___;
var ___EXPOSE_LOADER_IMPORT_MODULE_LOCAL_NAME___ = ___EXPOSE_LOADER_IMPORT___.anvilSave
if (typeof ___EXPOSE_LOADER_GLOBAL_THIS___["anvilSave"] === 'undefined') ___EXPOSE_LOADER_GLOBAL_THIS___["anvilSave"] = ___EXPOSE_LOADER_IMPORT_MODULE_LOCAL_NAME___;
else throw new Error('[exposes-loader] The "anvilSave" value exists in the global scope, it may not be safe to overwrite it, use the "override" option')
module.exports = ___EXPOSE_LOADER_IMPORT___;


/***/ }),

/***/ "./src/slimebank-exposed.js":
/*!**********************************!*\
  !*** ./src/slimebank-exposed.js ***!
  \**********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var ___EXPOSE_LOADER_IMPORT___ = __webpack_require__(/*! -!./slimebank.js */ "./src/slimebank.js");
var ___EXPOSE_LOADER_GET_GLOBAL_THIS___ = __webpack_require__(/*! ../node_modules/expose-loader/dist/runtime/getGlobalThis.js */ "./node_modules/expose-loader/dist/runtime/getGlobalThis.js");
var ___EXPOSE_LOADER_GLOBAL_THIS___ = ___EXPOSE_LOADER_GET_GLOBAL_THIS___;
var ___EXPOSE_LOADER_IMPORT_MODULE_LOCAL_NAME___ = ___EXPOSE_LOADER_IMPORT___.slimeBankResearchStone
if (typeof ___EXPOSE_LOADER_GLOBAL_THIS___["slimeBankResearchStone"] === 'undefined') ___EXPOSE_LOADER_GLOBAL_THIS___["slimeBankResearchStone"] = ___EXPOSE_LOADER_IMPORT_MODULE_LOCAL_NAME___;
else throw new Error('[exposes-loader] The "slimeBankResearchStone" value exists in the global scope, it may not be safe to overwrite it, use the "override" option')
var ___EXPOSE_LOADER_IMPORT_MODULE_LOCAL_NAME___ = ___EXPOSE_LOADER_IMPORT___.slimeBankResearchLeaf
if (typeof ___EXPOSE_LOADER_GLOBAL_THIS___["slimeBankResearchLeaf"] === 'undefined') ___EXPOSE_LOADER_GLOBAL_THIS___["slimeBankResearchLeaf"] = ___EXPOSE_LOADER_IMPORT_MODULE_LOCAL_NAME___;
else throw new Error('[exposes-loader] The "slimeBankResearchLeaf" value exists in the global scope, it may not be safe to overwrite it, use the "override" option')
var ___EXPOSE_LOADER_IMPORT_MODULE_LOCAL_NAME___ = ___EXPOSE_LOADER_IMPORT___.slimeBankSlimeCoinCap1
if (typeof ___EXPOSE_LOADER_GLOBAL_THIS___["slimeBankSlimeCoinCap1"] === 'undefined') ___EXPOSE_LOADER_GLOBAL_THIS___["slimeBankSlimeCoinCap1"] = ___EXPOSE_LOADER_IMPORT_MODULE_LOCAL_NAME___;
else throw new Error('[exposes-loader] The "slimeBankSlimeCoinCap1" value exists in the global scope, it may not be safe to overwrite it, use the "override" option')
var ___EXPOSE_LOADER_IMPORT_MODULE_LOCAL_NAME___ = ___EXPOSE_LOADER_IMPORT___.slimeBankSlimeCoinCap2
if (typeof ___EXPOSE_LOADER_GLOBAL_THIS___["slimeBankSlimeCoinCap2"] === 'undefined') ___EXPOSE_LOADER_GLOBAL_THIS___["slimeBankSlimeCoinCap2"] = ___EXPOSE_LOADER_IMPORT_MODULE_LOCAL_NAME___;
else throw new Error('[exposes-loader] The "slimeBankSlimeCoinCap2" value exists in the global scope, it may not be safe to overwrite it, use the "override" option')
module.exports = ___EXPOSE_LOADER_IMPORT___;


/***/ }),

/***/ "./node_modules/expose-loader/dist/runtime/getGlobalThis.js":
/*!******************************************************************!*\
  !*** ./node_modules/expose-loader/dist/runtime/getGlobalThis.js ***!
  \******************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


// eslint-disable-next-line func-names
module.exports = function () {
  if (typeof globalThis === "object") {
    return globalThis;
  }
  var g;
  try {
    // This works if eval is allowed (see CSP)
    // eslint-disable-next-line no-new-func
    g = this || new Function("return this")();
  } catch (e) {
    // This works if the window reference is available
    if (typeof window === "object") {
      return window;
    }

    // This works if the self reference is available
    if (typeof self === "object") {
      return self;
    }

    // This works if the global reference is available
    if (typeof __webpack_require__.g !== "undefined") {
      return __webpack_require__.g;
    }
  }
  return g;
}();

/***/ }),

/***/ "./src/anvil.js":
/*!**********************!*\
  !*** ./src/anvil.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "anvilSave": () => (/* binding */ anvilSave),
/* harmony export */   "calcAnvil": () => (/* binding */ calcAnvil)
/* harmony export */ });
function anvilSave(input) {
  localStorage.setItem(input, document.getElementById(input).value);
  calcAnvil();
}

function calcAnvil() {
  var nitro = localStorage.getItem("anvil-nitro-speed");

  for (let i = 1; i <= 10; i++) {
    let id = "anvil-dungeon-" + i + "-time";
    let value = "anvil-dungeon-" + i + "-value";
    let time = "anvil-dungeon-" + i + "-time";
    let orb = "anvil-dungeon-" + i + "-orb";
    let reward = document.getElementById(
      "anvil-dungeon-" + i + "-reward"
    ).innerHTML;

    document.getElementById(id).value = localStorage.getItem(id);
    document.getElementById(value).innerHTML = Math.round(
      (3600 / document.getElementById(time).value) * reward * nitro
    );
    document.getElementById(orb).innerHTML = Math.round(
      (3600 / document.getElementById(time).value) * nitro
    );
  }

  // list.forEach(myFunction);
  // if (localStorage.getItem('anvil-fox-dungeon-1-time') && document.getElementById('anvil-fox-dungeon-1-time').value != localStorage.getItem('anvil-fox-dungeon-1-time')) {
  //   document.getElementById('anvil-fox-dungeon-1-time').value = localStorage.getItem('anvil-fox-dungeon-1-time');
  // }
  // else {localStorage.setItem('anvil-fox-dungeon-1-time', document.getElementById('anvil-fox-dungeon-1-time').value);}

  //  document.getElementById('anvil-fox-dungeon-1-value').innerHTML = 3600 / document.getElementById('anvil-fox-dungeon-1-time').value;
}




/***/ }),

/***/ "./src/common.js":
/*!***********************!*\
  !*** ./src/common.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "convert": () => (/* binding */ convert),
/* harmony export */   "convert2": () => (/* binding */ convert2),
/* harmony export */   "currentTab": () => (/* binding */ currentTab),
/* harmony export */   "restart": () => (/* binding */ restart),
/* harmony export */   "sigma": () => (/* binding */ sigma)
/* harmony export */ });
// debug
function restart() {
  window.localStorage.clear();
}

function currentTab(input) {
  localStorage.setItem("setting-currentTab", input);
}

function sigma(lowerBound, upperBound, iterator, accumulator = 0) {
  // let accumulator = 0;
  for (let i = lowerBound; i <= upperBound; ++i) {
    accumulator += iterator(i);
  }
  return accumulator;
}

// convert normal number to K,M,B,T and exponential
function convert(input) {
  input = parseFloat(input);
  var output = 0;
  if (input == 0) {
    output = 0;
  } else if (input <= 10000) {
    output = Math.round(input);
  } else if (input < 1000000) {
    output = (input / 1000).toFixed(2) + "K";
  } else if (input < 1000000000) {
    output = (input / 1000000).toFixed(2) + "M";
  } else if (input < 1000000000000) {
    output = (input / 1000000000).toFixed(3) + "B";
  } else if (input < 1000000000000000) {
    output = (input / 1000000000000).toFixed(2) + "T";
  } else {
    output = input.toExponential(2);
  }

  return output;
}

// convert k,m,b,t to normal numbers
function convert2(input, min = 0, max = 999999999999999) {
  input = input.replace(/,/g, "."); // convert , to .
  if (/^\d*\.?\d+$/.test(input)) {
    if (input < min) {
      return min;
    } else if (input > max) {
      return max;
    } else {
      return input;
    }
    return input;
  } // return rounded number if there is no abbreviete
  else {
    const regex = /(.*)(\D)$/gm;
    input = input.toLowerCase();
    input = input.replace(/ /g, ""); // removes all spaces

    input = regex.exec(input);
    let output = 0;
    if (input[2] == "t") {
      output = input[1] * 1000 ** 4;
    } else if (input[2] == "b") {
      output = input[1] * 1000 ** 3;
    } else if (input[2] == "m") {
      output = input[1] * 1000 ** 2;
    } else if (input[2] == "k") {
      output = input[1] * 1000 ** 1;
    }

    return output;
  }
}




/***/ }),

/***/ "./src/expedition.js":
/*!***************************!*\
  !*** ./src/expedition.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "calcExpedition": () => (/* binding */ calcExpedition),
/* harmony export */   "expeditionLoad": () => (/* binding */ expeditionLoad),
/* harmony export */   "expeditionSave": () => (/* binding */ expeditionSave),
/* harmony export */   "testExpedition": () => (/* binding */ testExpedition)
/* harmony export */ });
/* harmony import */ var _common_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./common.js */ "./src/common-exposed.js");
/* harmony import */ var _common_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_common_js__WEBPACK_IMPORTED_MODULE_0__);


function expeditionSave(input) {
  if (document.getElementById(input).type == "text") {
    let value = (0,_common_js__WEBPACK_IMPORTED_MODULE_0__.convert2)(document.getElementById(input).value, 100);
    localStorage.setItem(input, value);
    document.getElementById(input).value = value;
    // console.log('text');
  } else if (document.getElementById(input).type == "checkbox") {
    localStorage.setItem(input, document.getElementById(input).checked);

    // console.log('checkbox');
    // console.log(document.getElementById(input).checked);
    // console.log(localStorage.getItem(input));
  }

  // console.log(input);
  calcExpedition();
}

function expeditionLoad() {
  let speedBonus1 = "expedition-speed-bonus-1";
  let speedBonus2 = "expedition-speed-bonus-2";
  let speedBonus3 = "expedition-speed-bonus-3";

  if (localStorage.getItem(speedBonus1) === null) {
    localStorage.setItem(speedBonus1, 100);
  } else {
    document.getElementById(speedBonus1).value =
      localStorage.getItem(speedBonus1);
  }
  if (localStorage.getItem(speedBonus2) === null) {
    localStorage.setItem(
      speedBonus2,
      document.getElementById(speedBonus2).checked
    );
  } else {
    document.getElementById(speedBonus2).checked =
      localStorage.getItem(speedBonus2) === "true";
  }
  if (localStorage.getItem(speedBonus3) === null) {
    localStorage.setItem(speedBonus3, false);
  } else {
    document.getElementById(speedBonus3).checked =
      localStorage.getItem(speedBonus3) === "true";
  }

  calcExpedition();
}

function calcExpedition() {
  // var nitro = localStorage.getItem('anvil-nitro-speed');
  let speedBonus1 = localStorage.getItem("expedition-speed-bonus-1");
  let speedBonus2 = "expedition-speed-bonus-2";
  let speedBonus3 = "expedition-speed-bonus-3";
  let totalSpeed = 0;
  // if (localStorage.getItem(speedBonus1) === null) {localStorage.setItem(speedBonus1, document.getElementById(speedBonus1).checked);}
  // else {document.getElementById(speedBonus1).checked = localStorage.getItem(speedBonus1);}
  let speedTable = [
    [106.519, "48.0h"],
    [68.014, "24.0h"],
    [35.495, "16.0h"],
    [17.759, "8.0h"],
    [8.877, "4.0h"],
    [4.439, "2.0h"],
    [2.2, "1.0h"],
  ];
  // if (localStorage.getItem(speedBonus2) == true) {totalSpeed += 1;}

  for (let i = 1; i <= 8; i++) {
    let level = "expedition-team-" + i + "-level";
    let speed = "expedition-team-" + i + "-speed";
    let time = "expedition-team-" + i + "-time";

    if (localStorage.getItem(level) === null) {
      localStorage.setItem(level, document.getElementById(level).value);
    } else {
      document.getElementById(level).value = localStorage.getItem(level);
    }

    //   reward = document.getElementById('anvil-dungeon-' + i + '-reward').innerHTML;
    document.getElementById(level).value = localStorage.getItem(level);
    let baseSpeed = 1 + document.getElementById(level).value * 0.001;
    // totalSpeed = baseSpeed ;
    let totalSpeed = (baseSpeed * speedBonus1) / 100;
    // if (localStorage.getItem(speedBonus2) === 'true') {totalSpeed += 1;}
    if (localStorage.getItem(speedBonus2) == "true") {
      totalSpeed += ((baseSpeed * speedBonus1) / 100) * 0.25;
    }
    if (localStorage.getItem(speedBonus3) == "true") {
      totalSpeed += ((baseSpeed * speedBonus1) / 100) * 0.25;
    }

    for (let i = 0; i < speedTable.length; i++) {
      if (totalSpeed >= speedTable[i][0]) {
        document.getElementById(time).innerHTML = speedTable[i][1];
        break;
      } else {
        document.getElementById(time).innerHTML = "0.5h";
      }
    }

    // for (const [key, value] of Object.entries(speedTable)) {
    //   if (totalSpeed > key) {
    //     document.getElementById(time).innerHTML = value;
    //   }
    //   console.log(`${key}: ${value}`);
    // }

    document.getElementById(speed).innerHTML = totalSpeed.toFixed(3);
    //   document.getElementById(orb).innerHTML = Math.round(3600 / document.getElementById(time).value * nitro) ;
  }
}

function testExpedition() {
  return "testExpedition";
}




/***/ }),

/***/ "./src/globals.js":
/*!************************!*\
  !*** ./src/globals.js ***!
  \************************/
/***/ (() => {

const file = "blah.txt";
const helpers = {
  test: function () {
    console.log("test something");
  },
  parse: function () {
    console.log("parse something");
  },
};


/***/ }),

/***/ "./src/load.js":
/*!*********************!*\
  !*** ./src/load.js ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "load": () => (/* binding */ load)
/* harmony export */ });
/* harmony import */ var _anvil_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./anvil.js */ "./src/anvil-exposed.js");
/* harmony import */ var _anvil_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_anvil_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _expedition_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./expedition.js */ "./src/expedition-exposed.js");
/* harmony import */ var _expedition_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_expedition_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _slimebank_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./slimebank.js */ "./src/slimebank-exposed.js");
/* harmony import */ var _slimebank_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_slimebank_js__WEBPACK_IMPORTED_MODULE_2__);
// import { convert, convert2, sigma, restart, currentTab } from "./common.js";





function load() {
  // current tab
  var tab = 0;
  const tab_list = ["slime-bank", "lab", "anvil", "expedition"];
  if (localStorage.getItem("setting-currentTab")) {
    tab_list.forEach((element) => {
      tab = element + "-calculator";
      if (localStorage.getItem("setting-currentTab") == element) {
        const words = element.split("-");

        for (let i = 0; i < words.length; i++) {
          words[i] = words[i][0].toUpperCase() + words[i].substr(1);
        }

        let title = "IEH2calc > " + words.join(" ") + " Calculator";
        document.getElementById("title").innerHTML = title;
        document.getElementById(tab).style.display = "block";
        document.getElementById(element).style.color = "#f2e009";
      } else {
        document.getElementById(tab).style.display = "none";
      }
    });
  } else {
    localStorage.setItem("setting-currentTab", "slime-bank");
    document.getElementById("slime-bank").style.color = "#f2e009";
    document.getElementById("lab-calculator").style.display = "none";
    document.getElementById("anvil-calculator").style.display = "none";
    document.getElementById("expedition-calculator").style.display = "none";
  }
  // Anvil loading
  if (localStorage.getItem("anvil-nitro-speed") === null) {
    localStorage.setItem("anvil-nitro-speed", 1);
  } else {
    document.getElementById("anvil-nitro-speed").value =
      localStorage.getItem("anvil-nitro-speed");
  }
  // anvil load need refactor

  for (let i = 1; i <= 10; i++) {
    var id = 0;
    id = "anvil-dungeon-" + i + "-time";
    if (localStorage.getItem(id) === null) {
      localStorage.setItem(id, document.getElementById(id).value);
    } else {
      document.getElementById(id).value = localStorage.getItem(id);
    }
  }
  (0,_anvil_js__WEBPACK_IMPORTED_MODULE_0__.calcAnvil)();
  // calcExpedition();
  (0,_expedition_js__WEBPACK_IMPORTED_MODULE_1__.expeditionLoad)();
  // loading values from localStorage else setting values as 0
  // const list = [
  //   'anvil-fox-dungeon-1-time', 'anvil-fox-dungeon-2-time', 'anvil-fox-dungeon-3-time',
  // 'anvil-fox-dungeon-4-time', 'anvil-fox-dungeon-5-time','anvil-bat-dungeon-1-time','anvil-bat-dungeon-2-time',
  // 'anvil-bat-dungeon-3-time','anvil-bat-dungeon-4-time','anvil-bat-dungeon-5-time'];
  // const items = { ...localStorage };
  // console.log(items);
  // list.forEach(element => {
  //  console.log(element);
  //  if (localStorage.getItem(element) === null) {slimeBankResearchStone(0);}
  //  else {slimeBankResearchStone(localStorage.getItem('slime-bank-research-stone-level'));}
  // });

  // Slime Bank loading
  if (localStorage.getItem("slime-bank-research-stone-level") === null) {
    (0,_slimebank_js__WEBPACK_IMPORTED_MODULE_2__.slimeBankResearchStone)(0);
  } else {
    (0,_slimebank_js__WEBPACK_IMPORTED_MODULE_2__.slimeBankResearchStone)(
      localStorage.getItem("slime-bank-research-stone-level")
    );
  }

  if (localStorage.getItem("slime-bank-research-leaf-level") === null) {
    (0,_slimebank_js__WEBPACK_IMPORTED_MODULE_2__.slimeBankResearchLeaf)(0);
  } else {
    (0,_slimebank_js__WEBPACK_IMPORTED_MODULE_2__.slimeBankResearchLeaf)(
      localStorage.getItem("slime-bank-research-leaf-level")
    );
  }

  if (
    localStorage.getItem("slime-bank-upgrade-slime-coin-cap-1-level") === null
  ) {
    (0,_slimebank_js__WEBPACK_IMPORTED_MODULE_2__.slimeBankSlimeCoinCap1)(0);
  } else {
    (0,_slimebank_js__WEBPACK_IMPORTED_MODULE_2__.slimeBankSlimeCoinCap1)(
      localStorage.getItem("slime-bank-upgrade-slime-coin-cap-1-level")
    );
  }

  if (
    localStorage.getItem("slime-bank-upgrade-slime-coin-cap-2-level") === null
  ) {
    (0,_slimebank_js__WEBPACK_IMPORTED_MODULE_2__.slimeBankSlimeCoinCap2)(0);
  } else {
    (0,_slimebank_js__WEBPACK_IMPORTED_MODULE_2__.slimeBankSlimeCoinCap2)(
      localStorage.getItem("slime-bank-upgrade-slime-coin-cap-2-level")
    );
  }

  // slimeBankSlimeCoinCapTotal();
  // slimeBankIntrest();
  // slimeBankOptimiser();
  // debug
  // for (const [key, value] of Object.entries({ ...localStorage })) {
  //   // console.log(`${key}: ${value}`);
  //   document.getElementById('debug').innerHTML += `<i>${key}:</i> <b>${value}</b><br>`;
  // }
}




/***/ }),

/***/ "./src/slimebank.js":
/*!**************************!*\
  !*** ./src/slimebank.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "slimeBankIntrest": () => (/* binding */ slimeBankIntrest),
/* harmony export */   "slimeBankOptimiser": () => (/* binding */ slimeBankOptimiser),
/* harmony export */   "slimeBankResearchLeaf": () => (/* binding */ slimeBankResearchLeaf),
/* harmony export */   "slimeBankResearchStone": () => (/* binding */ slimeBankResearchStone),
/* harmony export */   "slimeBankSlimeCoinCap1": () => (/* binding */ slimeBankSlimeCoinCap1),
/* harmony export */   "slimeBankSlimeCoinCap2": () => (/* binding */ slimeBankSlimeCoinCap2),
/* harmony export */   "slimeBankSlimeCoinCapTotal": () => (/* binding */ slimeBankSlimeCoinCapTotal)
/* harmony export */ });
/* harmony import */ var _common_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./common.js */ "./src/common-exposed.js");
/* harmony import */ var _common_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_common_js__WEBPACK_IMPORTED_MODULE_0__);

// Slime Bank functions

function slimeBankSlimeCoinCapTotal() {
  let output =
    localStorage.getItem("slime-bank-upgrade-slime-coin-cap-1-value") *
    ((localStorage.getItem("slime-bank-research-leaf-level") * 2 + 100) / 100) *
    (localStorage.getItem("slime-bank-upgrade-slime-coin-cap-2-value") / 100);
  localStorage.setItem("slime-bank-slime-coin-cap-total", output);
  document.getElementById("slime-bank-slime-coin-cap-value").innerHTML =
    (0,_common_js__WEBPACK_IMPORTED_MODULE_0__.convert)(output);
  slimeBankIntrest();
  slimeBankOptimiser();
}

function slimeBankIntrest() {
  let intrest =
    document.getElementById("slime-bank-research-stone-level").value *
    0.001 *
    localStorage.getItem("slime-bank-slime-coin-cap-total");
  localStorage.setItem("slime-bank-intrest", intrest);
  document.getElementById("slime-bank-intrest").innerHTML = (0,_common_js__WEBPACK_IMPORTED_MODULE_0__.convert)(intrest);
  slimeBankOptimiser();
}

function slimeBankOptimiser() {
  let slime_coin_cap_1_level = localStorage.getItem(
    "slime-bank-upgrade-slime-coin-cap-1-level"
  );
  let intrest =
    localStorage.getItem("slime-bank-intrest") -
    localStorage.getItem("slime-bank-intrest") * 0.1;
  let slime_coin_cap_1_cost;

  if (slime_coin_cap_1_level >= 1000000000) {
    slime_coin_cap_1_cost = 10000000000000000;
  } // 1.00+E16
  else if (slime_coin_cap_1_level >= 500000000) {
    slime_coin_cap_1_cost = 1000000000000000;
  } // 1.00+E15
  else if (slime_coin_cap_1_level >= 100000000) {
    slime_coin_cap_1_cost = 100000000000000;
  } // 100T
  else if (slime_coin_cap_1_level >= 50000000) {
    slime_coin_cap_1_cost = 10000000000000;
  } // 10T
  else if (slime_coin_cap_1_level >= 10000000) {
    slime_coin_cap_1_cost = 1000000000000;
  } // 1T
  else {
    slime_coin_cap_1_cost =
      localStorage.getItem("slime-bank-upgrade-slime-coin-cap-1-level") *
        10000 +
      10000;
  } // need to find solution for less than 10M upgrades

  document.getElementById(
    "slime-bank-upgrade-slime-coin-cap-1-cost"
  ).innerHTML = (0,_common_js__WEBPACK_IMPORTED_MODULE_0__.convert)(slime_coin_cap_1_cost);
  let output = Math.round(intrest / slime_coin_cap_1_cost);
  document.getElementById("slime-bank-optimiser").innerHTML = output;
}

function slimeBankSlimeCoinCap1(input) {
  input = (0,_common_js__WEBPACK_IMPORTED_MODULE_0__.convert2)(input);

  if (
    input != localStorage.getItem("slime-bank-upgrade-slime-coin-cap-1-level")
  ) {
    let output = (0,_common_js__WEBPACK_IMPORTED_MODULE_0__.sigma)(
      0,
      input,
      function (a) {
        return a * 20 - 10 + 10000;
      },
      10
    );
    document.getElementById(
      "slime-bank-upgrade-slime-coin-cap-1-value"
    ).innerHTML = (0,_common_js__WEBPACK_IMPORTED_MODULE_0__.convert)(output);
    localStorage.setItem("slime-bank-upgrade-slime-coin-cap-1-level", input);
    localStorage.setItem("slime-bank-upgrade-slime-coin-cap-1-value", output);
  } else {
    document.getElementById(
      "slime-bank-upgrade-slime-coin-cap-1-value"
    ).innerHTML = (0,_common_js__WEBPACK_IMPORTED_MODULE_0__.convert)(
      localStorage.getItem("slime-bank-upgrade-slime-coin-cap-1-value")
    );
  }
  document.getElementById("slime-bank-upgrade-slime-coin-cap-1-level").value =
    (0,_common_js__WEBPACK_IMPORTED_MODULE_0__.convert)(localStorage.getItem("slime-bank-upgrade-slime-coin-cap-1-level"));
  slimeBankSlimeCoinCapTotal();
}

function slimeBankSlimeCoinCap2(input) {
  let output = (0,_common_js__WEBPACK_IMPORTED_MODULE_0__.sigma)(
    0,
    input,
    function (a) {
      return a * 20 - 10;
    },
    10
  );
  localStorage.setItem("slime-bank-upgrade-slime-coin-cap-2-level", input);
  localStorage.setItem(
    "slime-bank-upgrade-slime-coin-cap-2-value",
    output + 100
  );
  document.getElementById(
    "slime-bank-upgrade-slime-coin-cap-2-value"
  ).innerHTML = (0,_common_js__WEBPACK_IMPORTED_MODULE_0__.convert)(output + 100);
  document.getElementById("slime-bank-upgrade-slime-coin-cap-2-level").value =
    localStorage.getItem("slime-bank-upgrade-slime-coin-cap-2-level");
  slimeBankSlimeCoinCapTotal();
}

function slimeBankResearchStone(input) {
  localStorage.setItem("slime-bank-research-stone-level", input);
  document.getElementById("slime-bank-research-stone-level").value =
    localStorage.getItem("slime-bank-research-stone-level");
  document.getElementById("slime-bank-research-stone-value").innerHTML = +(
    input * 0.1
  ).toFixed(2);
  slimeBankIntrest();
}

function slimeBankResearchLeaf(input) {
  localStorage.setItem("slime-bank-research-leaf-level", input);
  document.getElementById("slime-bank-research-leaf-level").value =
    localStorage.getItem("slime-bank-research-leaf-level");
  document.getElementById("slime-bank-research-leaf-value").innerHTML =
    +(input * 2).toFixed(2) + 100;
  slimeBankSlimeCoinCapTotal();
}




/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _load_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./load.js */ "./src/load.js");
// import { currentTab } from "./common.js";
// import { currentTab } from "expose-loader?exposes=window.$ currentTab";
//
// Adds the `jquery` to the global object under the names `$` and `jQuery`

const { file, parse } = __webpack_require__(/*! ./globals.js */ "./src/globals.js");

function ready(fn) {
  if (document.readyState != "loading") {
    fn();
  } else {
    document.addEventListener("DOMContentLoaded", fn);
  }
}

ready(function () {
  // start up your app
  (0,_load_js__WEBPACK_IMPORTED_MODULE_0__.load)();
  // console.log(document.body);
  // const xxx = currentTab();
});
// this.alert("Hmmm, this probably isn't a great idea...");

})();

/******/ 	return __webpack_exports__;
/******/ })()
;
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLDhDQUFJO0FBQ047QUFDQTtBQUNBLENBQUM7QUFDRCIsInNvdXJjZXMiOlsid2VicGFjazovL2llaDJjYWxjL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9pZWgyY2FsYy8uL3NyYy9jb21tb24tZXhwb3NlZC5qcyIsIndlYnBhY2s6Ly9pZWgyY2FsYy8uL3NyYy9leHBlZGl0aW9uLWV4cG9zZWQuanMiLCJ3ZWJwYWNrOi8vaWVoMmNhbGMvLi9zcmMvYW52aWwtZXhwb3NlZC5qcyIsIndlYnBhY2s6Ly9pZWgyY2FsYy8uL3NyYy9zbGltZWJhbmstZXhwb3NlZC5qcyIsIndlYnBhY2s6Ly9pZWgyY2FsYy8uL25vZGVfbW9kdWxlcy9leHBvc2UtbG9hZGVyL2Rpc3QvcnVudGltZS9nZXRHbG9iYWxUaGlzLmpzIiwid2VicGFjazovL2llaDJjYWxjLy4vc3JjL2FudmlsLmpzIiwid2VicGFjazovL2llaDJjYWxjLy4vc3JjL2NvbW1vbi5qcyIsIndlYnBhY2s6Ly9pZWgyY2FsYy8uL3NyYy9leHBlZGl0aW9uLmpzIiwid2VicGFjazovL2llaDJjYWxjLy4vc3JjL2dsb2JhbHMuanMiLCJ3ZWJwYWNrOi8vaWVoMmNhbGMvLi9zcmMvbG9hZC5qcyIsIndlYnBhY2s6Ly9pZWgyY2FsYy8uL3NyYy9zbGltZWJhbmsuanMiLCJ3ZWJwYWNrOi8vaWVoMmNhbGMvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vaWVoMmNhbGMvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vaWVoMmNhbGMvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL2llaDJjYWxjL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vaWVoMmNhbGMvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9pZWgyY2FsYy93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL2llaDJjYWxjLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcImllaDJjYWxjXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcImllaDJjYWxjXCJdID0gZmFjdG9yeSgpO1xufSkodGhpcywgKCkgPT4ge1xucmV0dXJuICIsInZhciBfX19FWFBPU0VfTE9BREVSX0lNUE9SVF9fXyA9IHJlcXVpcmUoXCItIS4vY29tbW9uLmpzXCIpO1xudmFyIF9fX0VYUE9TRV9MT0FERVJfR0VUX0dMT0JBTF9USElTX19fID0gcmVxdWlyZShcIi4uL25vZGVfbW9kdWxlcy9leHBvc2UtbG9hZGVyL2Rpc3QvcnVudGltZS9nZXRHbG9iYWxUaGlzLmpzXCIpO1xudmFyIF9fX0VYUE9TRV9MT0FERVJfR0xPQkFMX1RISVNfX18gPSBfX19FWFBPU0VfTE9BREVSX0dFVF9HTE9CQUxfVEhJU19fXztcbnZhciBfX19FWFBPU0VfTE9BREVSX0lNUE9SVF9NT0RVTEVfTE9DQUxfTkFNRV9fXyA9IF9fX0VYUE9TRV9MT0FERVJfSU1QT1JUX19fLmN1cnJlbnRUYWJcbmlmICh0eXBlb2YgX19fRVhQT1NFX0xPQURFUl9HTE9CQUxfVEhJU19fX1tcImN1cnJlbnRUYWJcIl0gPT09ICd1bmRlZmluZWQnKSBfX19FWFBPU0VfTE9BREVSX0dMT0JBTF9USElTX19fW1wiY3VycmVudFRhYlwiXSA9IF9fX0VYUE9TRV9MT0FERVJfSU1QT1JUX01PRFVMRV9MT0NBTF9OQU1FX19fO1xuZWxzZSB0aHJvdyBuZXcgRXJyb3IoJ1tleHBvc2VzLWxvYWRlcl0gVGhlIFwiY3VycmVudFRhYlwiIHZhbHVlIGV4aXN0cyBpbiB0aGUgZ2xvYmFsIHNjb3BlLCBpdCBtYXkgbm90IGJlIHNhZmUgdG8gb3ZlcndyaXRlIGl0LCB1c2UgdGhlIFwib3ZlcnJpZGVcIiBvcHRpb24nKVxudmFyIF9fX0VYUE9TRV9MT0FERVJfSU1QT1JUX01PRFVMRV9MT0NBTF9OQU1FX19fID0gX19fRVhQT1NFX0xPQURFUl9JTVBPUlRfX18ucmVzdGFydFxuaWYgKHR5cGVvZiBfX19FWFBPU0VfTE9BREVSX0dMT0JBTF9USElTX19fW1wicmVzdGFydFwiXSA9PT0gJ3VuZGVmaW5lZCcpIF9fX0VYUE9TRV9MT0FERVJfR0xPQkFMX1RISVNfX19bXCJyZXN0YXJ0XCJdID0gX19fRVhQT1NFX0xPQURFUl9JTVBPUlRfTU9EVUxFX0xPQ0FMX05BTUVfX187XG5lbHNlIHRocm93IG5ldyBFcnJvcignW2V4cG9zZXMtbG9hZGVyXSBUaGUgXCJyZXN0YXJ0XCIgdmFsdWUgZXhpc3RzIGluIHRoZSBnbG9iYWwgc2NvcGUsIGl0IG1heSBub3QgYmUgc2FmZSB0byBvdmVyd3JpdGUgaXQsIHVzZSB0aGUgXCJvdmVycmlkZVwiIG9wdGlvbicpXG5tb2R1bGUuZXhwb3J0cyA9IF9fX0VYUE9TRV9MT0FERVJfSU1QT1JUX19fO1xuIiwidmFyIF9fX0VYUE9TRV9MT0FERVJfSU1QT1JUX19fID0gcmVxdWlyZShcIi0hLi9leHBlZGl0aW9uLmpzXCIpO1xudmFyIF9fX0VYUE9TRV9MT0FERVJfR0VUX0dMT0JBTF9USElTX19fID0gcmVxdWlyZShcIi4uL25vZGVfbW9kdWxlcy9leHBvc2UtbG9hZGVyL2Rpc3QvcnVudGltZS9nZXRHbG9iYWxUaGlzLmpzXCIpO1xudmFyIF9fX0VYUE9TRV9MT0FERVJfR0xPQkFMX1RISVNfX18gPSBfX19FWFBPU0VfTE9BREVSX0dFVF9HTE9CQUxfVEhJU19fXztcbnZhciBfX19FWFBPU0VfTE9BREVSX0lNUE9SVF9NT0RVTEVfTE9DQUxfTkFNRV9fXyA9IF9fX0VYUE9TRV9MT0FERVJfSU1QT1JUX19fLmV4cGVkaXRpb25TYXZlXG5pZiAodHlwZW9mIF9fX0VYUE9TRV9MT0FERVJfR0xPQkFMX1RISVNfX19bXCJleHBlZGl0aW9uU2F2ZVwiXSA9PT0gJ3VuZGVmaW5lZCcpIF9fX0VYUE9TRV9MT0FERVJfR0xPQkFMX1RISVNfX19bXCJleHBlZGl0aW9uU2F2ZVwiXSA9IF9fX0VYUE9TRV9MT0FERVJfSU1QT1JUX01PRFVMRV9MT0NBTF9OQU1FX19fO1xuZWxzZSB0aHJvdyBuZXcgRXJyb3IoJ1tleHBvc2VzLWxvYWRlcl0gVGhlIFwiZXhwZWRpdGlvblNhdmVcIiB2YWx1ZSBleGlzdHMgaW4gdGhlIGdsb2JhbCBzY29wZSwgaXQgbWF5IG5vdCBiZSBzYWZlIHRvIG92ZXJ3cml0ZSBpdCwgdXNlIHRoZSBcIm92ZXJyaWRlXCIgb3B0aW9uJylcbm1vZHVsZS5leHBvcnRzID0gX19fRVhQT1NFX0xPQURFUl9JTVBPUlRfX187XG4iLCJ2YXIgX19fRVhQT1NFX0xPQURFUl9JTVBPUlRfX18gPSByZXF1aXJlKFwiLSEuL2FudmlsLmpzXCIpO1xudmFyIF9fX0VYUE9TRV9MT0FERVJfR0VUX0dMT0JBTF9USElTX19fID0gcmVxdWlyZShcIi4uL25vZGVfbW9kdWxlcy9leHBvc2UtbG9hZGVyL2Rpc3QvcnVudGltZS9nZXRHbG9iYWxUaGlzLmpzXCIpO1xudmFyIF9fX0VYUE9TRV9MT0FERVJfR0xPQkFMX1RISVNfX18gPSBfX19FWFBPU0VfTE9BREVSX0dFVF9HTE9CQUxfVEhJU19fXztcbnZhciBfX19FWFBPU0VfTE9BREVSX0lNUE9SVF9NT0RVTEVfTE9DQUxfTkFNRV9fXyA9IF9fX0VYUE9TRV9MT0FERVJfSU1QT1JUX19fLmFudmlsU2F2ZVxuaWYgKHR5cGVvZiBfX19FWFBPU0VfTE9BREVSX0dMT0JBTF9USElTX19fW1wiYW52aWxTYXZlXCJdID09PSAndW5kZWZpbmVkJykgX19fRVhQT1NFX0xPQURFUl9HTE9CQUxfVEhJU19fX1tcImFudmlsU2F2ZVwiXSA9IF9fX0VYUE9TRV9MT0FERVJfSU1QT1JUX01PRFVMRV9MT0NBTF9OQU1FX19fO1xuZWxzZSB0aHJvdyBuZXcgRXJyb3IoJ1tleHBvc2VzLWxvYWRlcl0gVGhlIFwiYW52aWxTYXZlXCIgdmFsdWUgZXhpc3RzIGluIHRoZSBnbG9iYWwgc2NvcGUsIGl0IG1heSBub3QgYmUgc2FmZSB0byBvdmVyd3JpdGUgaXQsIHVzZSB0aGUgXCJvdmVycmlkZVwiIG9wdGlvbicpXG5tb2R1bGUuZXhwb3J0cyA9IF9fX0VYUE9TRV9MT0FERVJfSU1QT1JUX19fO1xuIiwidmFyIF9fX0VYUE9TRV9MT0FERVJfSU1QT1JUX19fID0gcmVxdWlyZShcIi0hLi9zbGltZWJhbmsuanNcIik7XG52YXIgX19fRVhQT1NFX0xPQURFUl9HRVRfR0xPQkFMX1RISVNfX18gPSByZXF1aXJlKFwiLi4vbm9kZV9tb2R1bGVzL2V4cG9zZS1sb2FkZXIvZGlzdC9ydW50aW1lL2dldEdsb2JhbFRoaXMuanNcIik7XG52YXIgX19fRVhQT1NFX0xPQURFUl9HTE9CQUxfVEhJU19fXyA9IF9fX0VYUE9TRV9MT0FERVJfR0VUX0dMT0JBTF9USElTX19fO1xudmFyIF9fX0VYUE9TRV9MT0FERVJfSU1QT1JUX01PRFVMRV9MT0NBTF9OQU1FX19fID0gX19fRVhQT1NFX0xPQURFUl9JTVBPUlRfX18uc2xpbWVCYW5rUmVzZWFyY2hTdG9uZVxuaWYgKHR5cGVvZiBfX19FWFBPU0VfTE9BREVSX0dMT0JBTF9USElTX19fW1wic2xpbWVCYW5rUmVzZWFyY2hTdG9uZVwiXSA9PT0gJ3VuZGVmaW5lZCcpIF9fX0VYUE9TRV9MT0FERVJfR0xPQkFMX1RISVNfX19bXCJzbGltZUJhbmtSZXNlYXJjaFN0b25lXCJdID0gX19fRVhQT1NFX0xPQURFUl9JTVBPUlRfTU9EVUxFX0xPQ0FMX05BTUVfX187XG5lbHNlIHRocm93IG5ldyBFcnJvcignW2V4cG9zZXMtbG9hZGVyXSBUaGUgXCJzbGltZUJhbmtSZXNlYXJjaFN0b25lXCIgdmFsdWUgZXhpc3RzIGluIHRoZSBnbG9iYWwgc2NvcGUsIGl0IG1heSBub3QgYmUgc2FmZSB0byBvdmVyd3JpdGUgaXQsIHVzZSB0aGUgXCJvdmVycmlkZVwiIG9wdGlvbicpXG52YXIgX19fRVhQT1NFX0xPQURFUl9JTVBPUlRfTU9EVUxFX0xPQ0FMX05BTUVfX18gPSBfX19FWFBPU0VfTE9BREVSX0lNUE9SVF9fXy5zbGltZUJhbmtSZXNlYXJjaExlYWZcbmlmICh0eXBlb2YgX19fRVhQT1NFX0xPQURFUl9HTE9CQUxfVEhJU19fX1tcInNsaW1lQmFua1Jlc2VhcmNoTGVhZlwiXSA9PT0gJ3VuZGVmaW5lZCcpIF9fX0VYUE9TRV9MT0FERVJfR0xPQkFMX1RISVNfX19bXCJzbGltZUJhbmtSZXNlYXJjaExlYWZcIl0gPSBfX19FWFBPU0VfTE9BREVSX0lNUE9SVF9NT0RVTEVfTE9DQUxfTkFNRV9fXztcbmVsc2UgdGhyb3cgbmV3IEVycm9yKCdbZXhwb3Nlcy1sb2FkZXJdIFRoZSBcInNsaW1lQmFua1Jlc2VhcmNoTGVhZlwiIHZhbHVlIGV4aXN0cyBpbiB0aGUgZ2xvYmFsIHNjb3BlLCBpdCBtYXkgbm90IGJlIHNhZmUgdG8gb3ZlcndyaXRlIGl0LCB1c2UgdGhlIFwib3ZlcnJpZGVcIiBvcHRpb24nKVxudmFyIF9fX0VYUE9TRV9MT0FERVJfSU1QT1JUX01PRFVMRV9MT0NBTF9OQU1FX19fID0gX19fRVhQT1NFX0xPQURFUl9JTVBPUlRfX18uc2xpbWVCYW5rU2xpbWVDb2luQ2FwMVxuaWYgKHR5cGVvZiBfX19FWFBPU0VfTE9BREVSX0dMT0JBTF9USElTX19fW1wic2xpbWVCYW5rU2xpbWVDb2luQ2FwMVwiXSA9PT0gJ3VuZGVmaW5lZCcpIF9fX0VYUE9TRV9MT0FERVJfR0xPQkFMX1RISVNfX19bXCJzbGltZUJhbmtTbGltZUNvaW5DYXAxXCJdID0gX19fRVhQT1NFX0xPQURFUl9JTVBPUlRfTU9EVUxFX0xPQ0FMX05BTUVfX187XG5lbHNlIHRocm93IG5ldyBFcnJvcignW2V4cG9zZXMtbG9hZGVyXSBUaGUgXCJzbGltZUJhbmtTbGltZUNvaW5DYXAxXCIgdmFsdWUgZXhpc3RzIGluIHRoZSBnbG9iYWwgc2NvcGUsIGl0IG1heSBub3QgYmUgc2FmZSB0byBvdmVyd3JpdGUgaXQsIHVzZSB0aGUgXCJvdmVycmlkZVwiIG9wdGlvbicpXG52YXIgX19fRVhQT1NFX0xPQURFUl9JTVBPUlRfTU9EVUxFX0xPQ0FMX05BTUVfX18gPSBfX19FWFBPU0VfTE9BREVSX0lNUE9SVF9fXy5zbGltZUJhbmtTbGltZUNvaW5DYXAyXG5pZiAodHlwZW9mIF9fX0VYUE9TRV9MT0FERVJfR0xPQkFMX1RISVNfX19bXCJzbGltZUJhbmtTbGltZUNvaW5DYXAyXCJdID09PSAndW5kZWZpbmVkJykgX19fRVhQT1NFX0xPQURFUl9HTE9CQUxfVEhJU19fX1tcInNsaW1lQmFua1NsaW1lQ29pbkNhcDJcIl0gPSBfX19FWFBPU0VfTE9BREVSX0lNUE9SVF9NT0RVTEVfTE9DQUxfTkFNRV9fXztcbmVsc2UgdGhyb3cgbmV3IEVycm9yKCdbZXhwb3Nlcy1sb2FkZXJdIFRoZSBcInNsaW1lQmFua1NsaW1lQ29pbkNhcDJcIiB2YWx1ZSBleGlzdHMgaW4gdGhlIGdsb2JhbCBzY29wZSwgaXQgbWF5IG5vdCBiZSBzYWZlIHRvIG92ZXJ3cml0ZSBpdCwgdXNlIHRoZSBcIm92ZXJyaWRlXCIgb3B0aW9uJylcbm1vZHVsZS5leHBvcnRzID0gX19fRVhQT1NFX0xPQURFUl9JTVBPUlRfX187XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICBpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09IFwib2JqZWN0XCIpIHtcbiAgICByZXR1cm4gZ2xvYmFsVGhpcztcbiAgfVxuICB2YXIgZztcbiAgdHJ5IHtcbiAgICAvLyBUaGlzIHdvcmtzIGlmIGV2YWwgaXMgYWxsb3dlZCAoc2VlIENTUClcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbmV3LWZ1bmNcbiAgICBnID0gdGhpcyB8fCBuZXcgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgLy8gVGhpcyB3b3JrcyBpZiB0aGUgd2luZG93IHJlZmVyZW5jZSBpcyBhdmFpbGFibGVcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIikge1xuICAgICAgcmV0dXJuIHdpbmRvdztcbiAgICB9XG5cbiAgICAvLyBUaGlzIHdvcmtzIGlmIHRoZSBzZWxmIHJlZmVyZW5jZSBpcyBhdmFpbGFibGVcbiAgICBpZiAodHlwZW9mIHNlbGYgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIFRoaXMgd29ya3MgaWYgdGhlIGdsb2JhbCByZWZlcmVuY2UgaXMgYXZhaWxhYmxlXG4gICAgaWYgKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHJldHVybiBnbG9iYWw7XG4gICAgfVxuICB9XG4gIHJldHVybiBnO1xufSgpOyIsImZ1bmN0aW9uIGFudmlsU2F2ZShpbnB1dCkge1xyXG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGlucHV0LCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpbnB1dCkudmFsdWUpO1xyXG4gIGNhbGNBbnZpbCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjYWxjQW52aWwoKSB7XHJcbiAgdmFyIG5pdHJvID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJhbnZpbC1uaXRyby1zcGVlZFwiKTtcclxuXHJcbiAgZm9yIChsZXQgaSA9IDE7IGkgPD0gMTA7IGkrKykge1xyXG4gICAgbGV0IGlkID0gXCJhbnZpbC1kdW5nZW9uLVwiICsgaSArIFwiLXRpbWVcIjtcclxuICAgIGxldCB2YWx1ZSA9IFwiYW52aWwtZHVuZ2Vvbi1cIiArIGkgKyBcIi12YWx1ZVwiO1xyXG4gICAgbGV0IHRpbWUgPSBcImFudmlsLWR1bmdlb24tXCIgKyBpICsgXCItdGltZVwiO1xyXG4gICAgbGV0IG9yYiA9IFwiYW52aWwtZHVuZ2Vvbi1cIiArIGkgKyBcIi1vcmJcIjtcclxuICAgIGxldCByZXdhcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcclxuICAgICAgXCJhbnZpbC1kdW5nZW9uLVwiICsgaSArIFwiLXJld2FyZFwiXHJcbiAgICApLmlubmVySFRNTDtcclxuXHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkudmFsdWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShpZCk7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh2YWx1ZSkuaW5uZXJIVE1MID0gTWF0aC5yb3VuZChcclxuICAgICAgKDM2MDAgLyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aW1lKS52YWx1ZSkgKiByZXdhcmQgKiBuaXRyb1xyXG4gICAgKTtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG9yYikuaW5uZXJIVE1MID0gTWF0aC5yb3VuZChcclxuICAgICAgKDM2MDAgLyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aW1lKS52YWx1ZSkgKiBuaXRyb1xyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8vIGxpc3QuZm9yRWFjaChteUZ1bmN0aW9uKTtcclxuICAvLyBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FudmlsLWZveC1kdW5nZW9uLTEtdGltZScpICYmIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbnZpbC1mb3gtZHVuZ2Vvbi0xLXRpbWUnKS52YWx1ZSAhPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYW52aWwtZm94LWR1bmdlb24tMS10aW1lJykpIHtcclxuICAvLyAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbnZpbC1mb3gtZHVuZ2Vvbi0xLXRpbWUnKS52YWx1ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhbnZpbC1mb3gtZHVuZ2Vvbi0xLXRpbWUnKTtcclxuICAvLyB9XHJcbiAgLy8gZWxzZSB7bG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2FudmlsLWZveC1kdW5nZW9uLTEtdGltZScsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbnZpbC1mb3gtZHVuZ2Vvbi0xLXRpbWUnKS52YWx1ZSk7fVxyXG5cclxuICAvLyAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FudmlsLWZveC1kdW5nZW9uLTEtdmFsdWUnKS5pbm5lckhUTUwgPSAzNjAwIC8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FudmlsLWZveC1kdW5nZW9uLTEtdGltZScpLnZhbHVlO1xyXG59XHJcblxyXG5leHBvcnQgeyBjYWxjQW52aWwsIGFudmlsU2F2ZSB9O1xyXG4iLCIvLyBkZWJ1Z1xyXG5mdW5jdGlvbiByZXN0YXJ0KCkge1xyXG4gIHdpbmRvdy5sb2NhbFN0b3JhZ2UuY2xlYXIoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3VycmVudFRhYihpbnB1dCkge1xyXG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwic2V0dGluZy1jdXJyZW50VGFiXCIsIGlucHV0KTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2lnbWEobG93ZXJCb3VuZCwgdXBwZXJCb3VuZCwgaXRlcmF0b3IsIGFjY3VtdWxhdG9yID0gMCkge1xyXG4gIC8vIGxldCBhY2N1bXVsYXRvciA9IDA7XHJcbiAgZm9yIChsZXQgaSA9IGxvd2VyQm91bmQ7IGkgPD0gdXBwZXJCb3VuZDsgKytpKSB7XHJcbiAgICBhY2N1bXVsYXRvciArPSBpdGVyYXRvcihpKTtcclxuICB9XHJcbiAgcmV0dXJuIGFjY3VtdWxhdG9yO1xyXG59XHJcblxyXG4vLyBjb252ZXJ0IG5vcm1hbCBudW1iZXIgdG8gSyxNLEIsVCBhbmQgZXhwb25lbnRpYWxcclxuZnVuY3Rpb24gY29udmVydChpbnB1dCkge1xyXG4gIGlucHV0ID0gcGFyc2VGbG9hdChpbnB1dCk7XHJcbiAgdmFyIG91dHB1dCA9IDA7XHJcbiAgaWYgKGlucHV0ID09IDApIHtcclxuICAgIG91dHB1dCA9IDA7XHJcbiAgfSBlbHNlIGlmIChpbnB1dCA8PSAxMDAwMCkge1xyXG4gICAgb3V0cHV0ID0gTWF0aC5yb3VuZChpbnB1dCk7XHJcbiAgfSBlbHNlIGlmIChpbnB1dCA8IDEwMDAwMDApIHtcclxuICAgIG91dHB1dCA9IChpbnB1dCAvIDEwMDApLnRvRml4ZWQoMikgKyBcIktcIjtcclxuICB9IGVsc2UgaWYgKGlucHV0IDwgMTAwMDAwMDAwMCkge1xyXG4gICAgb3V0cHV0ID0gKGlucHV0IC8gMTAwMDAwMCkudG9GaXhlZCgyKSArIFwiTVwiO1xyXG4gIH0gZWxzZSBpZiAoaW5wdXQgPCAxMDAwMDAwMDAwMDAwKSB7XHJcbiAgICBvdXRwdXQgPSAoaW5wdXQgLyAxMDAwMDAwMDAwKS50b0ZpeGVkKDMpICsgXCJCXCI7XHJcbiAgfSBlbHNlIGlmIChpbnB1dCA8IDEwMDAwMDAwMDAwMDAwMDApIHtcclxuICAgIG91dHB1dCA9IChpbnB1dCAvIDEwMDAwMDAwMDAwMDApLnRvRml4ZWQoMikgKyBcIlRcIjtcclxuICB9IGVsc2Uge1xyXG4gICAgb3V0cHV0ID0gaW5wdXQudG9FeHBvbmVudGlhbCgyKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBvdXRwdXQ7XHJcbn1cclxuXHJcbi8vIGNvbnZlcnQgayxtLGIsdCB0byBub3JtYWwgbnVtYmVyc1xyXG5mdW5jdGlvbiBjb252ZXJ0MihpbnB1dCwgbWluID0gMCwgbWF4ID0gOTk5OTk5OTk5OTk5OTk5KSB7XHJcbiAgaW5wdXQgPSBpbnB1dC5yZXBsYWNlKC8sL2csIFwiLlwiKTsgLy8gY29udmVydCAsIHRvIC5cclxuICBpZiAoL15cXGQqXFwuP1xcZCskLy50ZXN0KGlucHV0KSkge1xyXG4gICAgaWYgKGlucHV0IDwgbWluKSB7XHJcbiAgICAgIHJldHVybiBtaW47XHJcbiAgICB9IGVsc2UgaWYgKGlucHV0ID4gbWF4KSB7XHJcbiAgICAgIHJldHVybiBtYXg7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gaW5wdXQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaW5wdXQ7XHJcbiAgfSAvLyByZXR1cm4gcm91bmRlZCBudW1iZXIgaWYgdGhlcmUgaXMgbm8gYWJicmV2aWV0ZVxyXG4gIGVsc2Uge1xyXG4gICAgY29uc3QgcmVnZXggPSAvKC4qKShcXEQpJC9nbTtcclxuICAgIGlucHV0ID0gaW5wdXQudG9Mb3dlckNhc2UoKTtcclxuICAgIGlucHV0ID0gaW5wdXQucmVwbGFjZSgvIC9nLCBcIlwiKTsgLy8gcmVtb3ZlcyBhbGwgc3BhY2VzXHJcblxyXG4gICAgaW5wdXQgPSByZWdleC5leGVjKGlucHV0KTtcclxuICAgIGxldCBvdXRwdXQgPSAwO1xyXG4gICAgaWYgKGlucHV0WzJdID09IFwidFwiKSB7XHJcbiAgICAgIG91dHB1dCA9IGlucHV0WzFdICogMTAwMCAqKiA0O1xyXG4gICAgfSBlbHNlIGlmIChpbnB1dFsyXSA9PSBcImJcIikge1xyXG4gICAgICBvdXRwdXQgPSBpbnB1dFsxXSAqIDEwMDAgKiogMztcclxuICAgIH0gZWxzZSBpZiAoaW5wdXRbMl0gPT0gXCJtXCIpIHtcclxuICAgICAgb3V0cHV0ID0gaW5wdXRbMV0gKiAxMDAwICoqIDI7XHJcbiAgICB9IGVsc2UgaWYgKGlucHV0WzJdID09IFwia1wiKSB7XHJcbiAgICAgIG91dHB1dCA9IGlucHV0WzFdICogMTAwMCAqKiAxO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBvdXRwdXQ7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBjb252ZXJ0LCBjb252ZXJ0Miwgc2lnbWEsIHJlc3RhcnQsIGN1cnJlbnRUYWIgfTtcclxuIiwiaW1wb3J0IHsgY29udmVydDIgfSBmcm9tIFwiLi9jb21tb24uanNcIjtcclxuXHJcbmZ1bmN0aW9uIGV4cGVkaXRpb25TYXZlKGlucHV0KSB7XHJcbiAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlucHV0KS50eXBlID09IFwidGV4dFwiKSB7XHJcbiAgICBsZXQgdmFsdWUgPSBjb252ZXJ0Mihkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpbnB1dCkudmFsdWUsIDEwMCk7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShpbnB1dCwgdmFsdWUpO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaW5wdXQpLnZhbHVlID0gdmFsdWU7XHJcbiAgICAvLyBjb25zb2xlLmxvZygndGV4dCcpO1xyXG4gIH0gZWxzZSBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaW5wdXQpLnR5cGUgPT0gXCJjaGVja2JveFwiKSB7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShpbnB1dCwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaW5wdXQpLmNoZWNrZWQpO1xyXG5cclxuICAgIC8vIGNvbnNvbGUubG9nKCdjaGVja2JveCcpO1xyXG4gICAgLy8gY29uc29sZS5sb2coZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaW5wdXQpLmNoZWNrZWQpO1xyXG4gICAgLy8gY29uc29sZS5sb2cobG9jYWxTdG9yYWdlLmdldEl0ZW0oaW5wdXQpKTtcclxuICB9XHJcblxyXG4gIC8vIGNvbnNvbGUubG9nKGlucHV0KTtcclxuICBjYWxjRXhwZWRpdGlvbigpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBleHBlZGl0aW9uTG9hZCgpIHtcclxuICBsZXQgc3BlZWRCb251czEgPSBcImV4cGVkaXRpb24tc3BlZWQtYm9udXMtMVwiO1xyXG4gIGxldCBzcGVlZEJvbnVzMiA9IFwiZXhwZWRpdGlvbi1zcGVlZC1ib251cy0yXCI7XHJcbiAgbGV0IHNwZWVkQm9udXMzID0gXCJleHBlZGl0aW9uLXNwZWVkLWJvbnVzLTNcIjtcclxuXHJcbiAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKHNwZWVkQm9udXMxKSA9PT0gbnVsbCkge1xyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oc3BlZWRCb251czEsIDEwMCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNwZWVkQm9udXMxKS52YWx1ZSA9XHJcbiAgICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKHNwZWVkQm9udXMxKTtcclxuICB9XHJcbiAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKHNwZWVkQm9udXMyKSA9PT0gbnVsbCkge1xyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXHJcbiAgICAgIHNwZWVkQm9udXMyLFxyXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzcGVlZEJvbnVzMikuY2hlY2tlZFxyXG4gICAgKTtcclxuICB9IGVsc2Uge1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc3BlZWRCb251czIpLmNoZWNrZWQgPVxyXG4gICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShzcGVlZEJvbnVzMikgPT09IFwidHJ1ZVwiO1xyXG4gIH1cclxuICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oc3BlZWRCb251czMpID09PSBudWxsKSB7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShzcGVlZEJvbnVzMywgZmFsc2UpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzcGVlZEJvbnVzMykuY2hlY2tlZCA9XHJcbiAgICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKHNwZWVkQm9udXMzKSA9PT0gXCJ0cnVlXCI7XHJcbiAgfVxyXG5cclxuICBjYWxjRXhwZWRpdGlvbigpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjYWxjRXhwZWRpdGlvbigpIHtcclxuICAvLyB2YXIgbml0cm8gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYW52aWwtbml0cm8tc3BlZWQnKTtcclxuICBsZXQgc3BlZWRCb251czEgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImV4cGVkaXRpb24tc3BlZWQtYm9udXMtMVwiKTtcclxuICBsZXQgc3BlZWRCb251czIgPSBcImV4cGVkaXRpb24tc3BlZWQtYm9udXMtMlwiO1xyXG4gIGxldCBzcGVlZEJvbnVzMyA9IFwiZXhwZWRpdGlvbi1zcGVlZC1ib251cy0zXCI7XHJcbiAgbGV0IHRvdGFsU3BlZWQgPSAwO1xyXG4gIC8vIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShzcGVlZEJvbnVzMSkgPT09IG51bGwpIHtsb2NhbFN0b3JhZ2Uuc2V0SXRlbShzcGVlZEJvbnVzMSwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc3BlZWRCb251czEpLmNoZWNrZWQpO31cclxuICAvLyBlbHNlIHtkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzcGVlZEJvbnVzMSkuY2hlY2tlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKHNwZWVkQm9udXMxKTt9XHJcbiAgbGV0IHNwZWVkVGFibGUgPSBbXHJcbiAgICBbMTA2LjUxOSwgXCI0OC4waFwiXSxcclxuICAgIFs2OC4wMTQsIFwiMjQuMGhcIl0sXHJcbiAgICBbMzUuNDk1LCBcIjE2LjBoXCJdLFxyXG4gICAgWzE3Ljc1OSwgXCI4LjBoXCJdLFxyXG4gICAgWzguODc3LCBcIjQuMGhcIl0sXHJcbiAgICBbNC40MzksIFwiMi4waFwiXSxcclxuICAgIFsyLjIsIFwiMS4waFwiXSxcclxuICBdO1xyXG4gIC8vIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShzcGVlZEJvbnVzMikgPT0gdHJ1ZSkge3RvdGFsU3BlZWQgKz0gMTt9XHJcblxyXG4gIGZvciAobGV0IGkgPSAxOyBpIDw9IDg7IGkrKykge1xyXG4gICAgbGV0IGxldmVsID0gXCJleHBlZGl0aW9uLXRlYW0tXCIgKyBpICsgXCItbGV2ZWxcIjtcclxuICAgIGxldCBzcGVlZCA9IFwiZXhwZWRpdGlvbi10ZWFtLVwiICsgaSArIFwiLXNwZWVkXCI7XHJcbiAgICBsZXQgdGltZSA9IFwiZXhwZWRpdGlvbi10ZWFtLVwiICsgaSArIFwiLXRpbWVcIjtcclxuXHJcbiAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0obGV2ZWwpID09PSBudWxsKSB7XHJcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGxldmVsLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChsZXZlbCkudmFsdWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobGV2ZWwpLnZhbHVlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0obGV2ZWwpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vICAgcmV3YXJkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FudmlsLWR1bmdlb24tJyArIGkgKyAnLXJld2FyZCcpLmlubmVySFRNTDtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxldmVsKS52YWx1ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGxldmVsKTtcclxuICAgIGxldCBiYXNlU3BlZWQgPSAxICsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobGV2ZWwpLnZhbHVlICogMC4wMDE7XHJcbiAgICAvLyB0b3RhbFNwZWVkID0gYmFzZVNwZWVkIDtcclxuICAgIGxldCB0b3RhbFNwZWVkID0gKGJhc2VTcGVlZCAqIHNwZWVkQm9udXMxKSAvIDEwMDtcclxuICAgIC8vIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShzcGVlZEJvbnVzMikgPT09ICd0cnVlJykge3RvdGFsU3BlZWQgKz0gMTt9XHJcbiAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oc3BlZWRCb251czIpID09IFwidHJ1ZVwiKSB7XHJcbiAgICAgIHRvdGFsU3BlZWQgKz0gKChiYXNlU3BlZWQgKiBzcGVlZEJvbnVzMSkgLyAxMDApICogMC4yNTtcclxuICAgIH1cclxuICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShzcGVlZEJvbnVzMykgPT0gXCJ0cnVlXCIpIHtcclxuICAgICAgdG90YWxTcGVlZCArPSAoKGJhc2VTcGVlZCAqIHNwZWVkQm9udXMxKSAvIDEwMCkgKiAwLjI1O1xyXG4gICAgfVxyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3BlZWRUYWJsZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICBpZiAodG90YWxTcGVlZCA+PSBzcGVlZFRhYmxlW2ldWzBdKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGltZSkuaW5uZXJIVE1MID0gc3BlZWRUYWJsZVtpXVsxXTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aW1lKS5pbm5lckhUTUwgPSBcIjAuNWhcIjtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHNwZWVkVGFibGUpKSB7XHJcbiAgICAvLyAgIGlmICh0b3RhbFNwZWVkID4ga2V5KSB7XHJcbiAgICAvLyAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGltZSkuaW5uZXJIVE1MID0gdmFsdWU7XHJcbiAgICAvLyAgIH1cclxuICAgIC8vICAgY29uc29sZS5sb2coYCR7a2V5fTogJHt2YWx1ZX1gKTtcclxuICAgIC8vIH1cclxuXHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzcGVlZCkuaW5uZXJIVE1MID0gdG90YWxTcGVlZC50b0ZpeGVkKDMpO1xyXG4gICAgLy8gICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChvcmIpLmlubmVySFRNTCA9IE1hdGgucm91bmQoMzYwMCAvIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRpbWUpLnZhbHVlICogbml0cm8pIDtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRlc3RFeHBlZGl0aW9uKCkge1xyXG4gIHJldHVybiBcInRlc3RFeHBlZGl0aW9uXCI7XHJcbn1cclxuXHJcbmV4cG9ydCB7IGV4cGVkaXRpb25TYXZlLCBleHBlZGl0aW9uTG9hZCwgY2FsY0V4cGVkaXRpb24sIHRlc3RFeHBlZGl0aW9uIH07XHJcbiIsImNvbnN0IGZpbGUgPSBcImJsYWgudHh0XCI7XHJcbmNvbnN0IGhlbHBlcnMgPSB7XHJcbiAgdGVzdDogZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc29sZS5sb2coXCJ0ZXN0IHNvbWV0aGluZ1wiKTtcclxuICB9LFxyXG4gIHBhcnNlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zb2xlLmxvZyhcInBhcnNlIHNvbWV0aGluZ1wiKTtcclxuICB9LFxyXG59O1xyXG4iLCIvLyBpbXBvcnQgeyBjb252ZXJ0LCBjb252ZXJ0Miwgc2lnbWEsIHJlc3RhcnQsIGN1cnJlbnRUYWIgfSBmcm9tIFwiLi9jb21tb24uanNcIjtcclxuaW1wb3J0IHsgY2FsY0FudmlsIH0gZnJvbSBcIi4vYW52aWwuanNcIjtcclxuaW1wb3J0IHsgZXhwZWRpdGlvbkxvYWQgfSBmcm9tIFwiLi9leHBlZGl0aW9uLmpzXCI7XHJcblxyXG5pbXBvcnQge1xyXG4gIHNsaW1lQmFua1NsaW1lQ29pbkNhcDEsXHJcbiAgc2xpbWVCYW5rU2xpbWVDb2luQ2FwMixcclxuICBzbGltZUJhbmtSZXNlYXJjaFN0b25lLFxyXG4gIHNsaW1lQmFua1Jlc2VhcmNoTGVhZixcclxufSBmcm9tIFwiLi9zbGltZWJhbmsuanNcIjtcclxuXHJcbmZ1bmN0aW9uIGxvYWQoKSB7XHJcbiAgLy8gY3VycmVudCB0YWJcclxuICB2YXIgdGFiID0gMDtcclxuICBjb25zdCB0YWJfbGlzdCA9IFtcInNsaW1lLWJhbmtcIiwgXCJsYWJcIiwgXCJhbnZpbFwiLCBcImV4cGVkaXRpb25cIl07XHJcbiAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwic2V0dGluZy1jdXJyZW50VGFiXCIpKSB7XHJcbiAgICB0YWJfbGlzdC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XHJcbiAgICAgIHRhYiA9IGVsZW1lbnQgKyBcIi1jYWxjdWxhdG9yXCI7XHJcbiAgICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInNldHRpbmctY3VycmVudFRhYlwiKSA9PSBlbGVtZW50KSB7XHJcbiAgICAgICAgY29uc3Qgd29yZHMgPSBlbGVtZW50LnNwbGl0KFwiLVwiKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3b3Jkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgd29yZHNbaV0gPSB3b3Jkc1tpXVswXS50b1VwcGVyQ2FzZSgpICsgd29yZHNbaV0uc3Vic3RyKDEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHRpdGxlID0gXCJJRUgyY2FsYyA+IFwiICsgd29yZHMuam9pbihcIiBcIikgKyBcIiBDYWxjdWxhdG9yXCI7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0aXRsZVwiKS5pbm5lckhUTUwgPSB0aXRsZTtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YWIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudCkuc3R5bGUuY29sb3IgPSBcIiNmMmUwMDlcIjtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YWIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwic2V0dGluZy1jdXJyZW50VGFiXCIsIFwic2xpbWUtYmFua1wiKTtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2xpbWUtYmFua1wiKS5zdHlsZS5jb2xvciA9IFwiI2YyZTAwOVwiO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsYWItY2FsY3VsYXRvclwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFudmlsLWNhbGN1bGF0b3JcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJleHBlZGl0aW9uLWNhbGN1bGF0b3JcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gIH1cclxuICAvLyBBbnZpbCBsb2FkaW5nXHJcbiAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiYW52aWwtbml0cm8tc3BlZWRcIikgPT09IG51bGwpIHtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiYW52aWwtbml0cm8tc3BlZWRcIiwgMSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYW52aWwtbml0cm8tc3BlZWRcIikudmFsdWUgPVxyXG4gICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImFudmlsLW5pdHJvLXNwZWVkXCIpO1xyXG4gIH1cclxuICAvLyBhbnZpbCBsb2FkIG5lZWQgcmVmYWN0b3JcclxuXHJcbiAgZm9yIChsZXQgaSA9IDE7IGkgPD0gMTA7IGkrKykge1xyXG4gICAgdmFyIGlkID0gMDtcclxuICAgIGlkID0gXCJhbnZpbC1kdW5nZW9uLVwiICsgaSArIFwiLXRpbWVcIjtcclxuICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShpZCkgPT09IG51bGwpIHtcclxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oaWQsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKS52YWx1ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkudmFsdWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShpZCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGNhbGNBbnZpbCgpO1xyXG4gIC8vIGNhbGNFeHBlZGl0aW9uKCk7XHJcbiAgZXhwZWRpdGlvbkxvYWQoKTtcclxuICAvLyBsb2FkaW5nIHZhbHVlcyBmcm9tIGxvY2FsU3RvcmFnZSBlbHNlIHNldHRpbmcgdmFsdWVzIGFzIDBcclxuICAvLyBjb25zdCBsaXN0ID0gW1xyXG4gIC8vICAgJ2FudmlsLWZveC1kdW5nZW9uLTEtdGltZScsICdhbnZpbC1mb3gtZHVuZ2Vvbi0yLXRpbWUnLCAnYW52aWwtZm94LWR1bmdlb24tMy10aW1lJyxcclxuICAvLyAnYW52aWwtZm94LWR1bmdlb24tNC10aW1lJywgJ2FudmlsLWZveC1kdW5nZW9uLTUtdGltZScsJ2FudmlsLWJhdC1kdW5nZW9uLTEtdGltZScsJ2FudmlsLWJhdC1kdW5nZW9uLTItdGltZScsXHJcbiAgLy8gJ2FudmlsLWJhdC1kdW5nZW9uLTMtdGltZScsJ2FudmlsLWJhdC1kdW5nZW9uLTQtdGltZScsJ2FudmlsLWJhdC1kdW5nZW9uLTUtdGltZSddO1xyXG4gIC8vIGNvbnN0IGl0ZW1zID0geyAuLi5sb2NhbFN0b3JhZ2UgfTtcclxuICAvLyBjb25zb2xlLmxvZyhpdGVtcyk7XHJcbiAgLy8gbGlzdC5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gIC8vICBjb25zb2xlLmxvZyhlbGVtZW50KTtcclxuICAvLyAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGVsZW1lbnQpID09PSBudWxsKSB7c2xpbWVCYW5rUmVzZWFyY2hTdG9uZSgwKTt9XHJcbiAgLy8gIGVsc2Uge3NsaW1lQmFua1Jlc2VhcmNoU3RvbmUobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3NsaW1lLWJhbmstcmVzZWFyY2gtc3RvbmUtbGV2ZWwnKSk7fVxyXG4gIC8vIH0pO1xyXG5cclxuICAvLyBTbGltZSBCYW5rIGxvYWRpbmdcclxuICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJzbGltZS1iYW5rLXJlc2VhcmNoLXN0b25lLWxldmVsXCIpID09PSBudWxsKSB7XHJcbiAgICBzbGltZUJhbmtSZXNlYXJjaFN0b25lKDApO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBzbGltZUJhbmtSZXNlYXJjaFN0b25lKFxyXG4gICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInNsaW1lLWJhbmstcmVzZWFyY2gtc3RvbmUtbGV2ZWxcIilcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJzbGltZS1iYW5rLXJlc2VhcmNoLWxlYWYtbGV2ZWxcIikgPT09IG51bGwpIHtcclxuICAgIHNsaW1lQmFua1Jlc2VhcmNoTGVhZigwKTtcclxuICB9IGVsc2Uge1xyXG4gICAgc2xpbWVCYW5rUmVzZWFyY2hMZWFmKFxyXG4gICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInNsaW1lLWJhbmstcmVzZWFyY2gtbGVhZi1sZXZlbFwiKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGlmIChcclxuICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwic2xpbWUtYmFuay11cGdyYWRlLXNsaW1lLWNvaW4tY2FwLTEtbGV2ZWxcIikgPT09IG51bGxcclxuICApIHtcclxuICAgIHNsaW1lQmFua1NsaW1lQ29pbkNhcDEoMCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHNsaW1lQmFua1NsaW1lQ29pbkNhcDEoXHJcbiAgICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwic2xpbWUtYmFuay11cGdyYWRlLXNsaW1lLWNvaW4tY2FwLTEtbGV2ZWxcIilcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBpZiAoXHJcbiAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInNsaW1lLWJhbmstdXBncmFkZS1zbGltZS1jb2luLWNhcC0yLWxldmVsXCIpID09PSBudWxsXHJcbiAgKSB7XHJcbiAgICBzbGltZUJhbmtTbGltZUNvaW5DYXAyKDApO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBzbGltZUJhbmtTbGltZUNvaW5DYXAyKFxyXG4gICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInNsaW1lLWJhbmstdXBncmFkZS1zbGltZS1jb2luLWNhcC0yLWxldmVsXCIpXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLy8gc2xpbWVCYW5rU2xpbWVDb2luQ2FwVG90YWwoKTtcclxuICAvLyBzbGltZUJhbmtJbnRyZXN0KCk7XHJcbiAgLy8gc2xpbWVCYW5rT3B0aW1pc2VyKCk7XHJcbiAgLy8gZGVidWdcclxuICAvLyBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh7IC4uLmxvY2FsU3RvcmFnZSB9KSkge1xyXG4gIC8vICAgLy8gY29uc29sZS5sb2coYCR7a2V5fTogJHt2YWx1ZX1gKTtcclxuICAvLyAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZWJ1ZycpLmlubmVySFRNTCArPSBgPGk+JHtrZXl9OjwvaT4gPGI+JHt2YWx1ZX08L2I+PGJyPmA7XHJcbiAgLy8gfVxyXG59XHJcblxyXG5leHBvcnQgeyBsb2FkIH07XHJcbiIsImltcG9ydCB7IGNvbnZlcnQsIGNvbnZlcnQyLCBzaWdtYSB9IGZyb20gXCIuL2NvbW1vbi5qc1wiO1xyXG4vLyBTbGltZSBCYW5rIGZ1bmN0aW9uc1xyXG5cclxuZnVuY3Rpb24gc2xpbWVCYW5rU2xpbWVDb2luQ2FwVG90YWwoKSB7XHJcbiAgbGV0IG91dHB1dCA9XHJcbiAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInNsaW1lLWJhbmstdXBncmFkZS1zbGltZS1jb2luLWNhcC0xLXZhbHVlXCIpICpcclxuICAgICgobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJzbGltZS1iYW5rLXJlc2VhcmNoLWxlYWYtbGV2ZWxcIikgKiAyICsgMTAwKSAvIDEwMCkgKlxyXG4gICAgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwic2xpbWUtYmFuay11cGdyYWRlLXNsaW1lLWNvaW4tY2FwLTItdmFsdWVcIikgLyAxMDApO1xyXG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwic2xpbWUtYmFuay1zbGltZS1jb2luLWNhcC10b3RhbFwiLCBvdXRwdXQpO1xyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2xpbWUtYmFuay1zbGltZS1jb2luLWNhcC12YWx1ZVwiKS5pbm5lckhUTUwgPVxyXG4gICAgY29udmVydChvdXRwdXQpO1xyXG4gIHNsaW1lQmFua0ludHJlc3QoKTtcclxuICBzbGltZUJhbmtPcHRpbWlzZXIoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2xpbWVCYW5rSW50cmVzdCgpIHtcclxuICBsZXQgaW50cmVzdCA9XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNsaW1lLWJhbmstcmVzZWFyY2gtc3RvbmUtbGV2ZWxcIikudmFsdWUgKlxyXG4gICAgMC4wMDEgKlxyXG4gICAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJzbGltZS1iYW5rLXNsaW1lLWNvaW4tY2FwLXRvdGFsXCIpO1xyXG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwic2xpbWUtYmFuay1pbnRyZXN0XCIsIGludHJlc3QpO1xyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2xpbWUtYmFuay1pbnRyZXN0XCIpLmlubmVySFRNTCA9IGNvbnZlcnQoaW50cmVzdCk7XHJcbiAgc2xpbWVCYW5rT3B0aW1pc2VyKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNsaW1lQmFua09wdGltaXNlcigpIHtcclxuICBsZXQgc2xpbWVfY29pbl9jYXBfMV9sZXZlbCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFxyXG4gICAgXCJzbGltZS1iYW5rLXVwZ3JhZGUtc2xpbWUtY29pbi1jYXAtMS1sZXZlbFwiXHJcbiAgKTtcclxuICBsZXQgaW50cmVzdCA9XHJcbiAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInNsaW1lLWJhbmstaW50cmVzdFwiKSAtXHJcbiAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInNsaW1lLWJhbmstaW50cmVzdFwiKSAqIDAuMTtcclxuICBsZXQgc2xpbWVfY29pbl9jYXBfMV9jb3N0O1xyXG5cclxuICBpZiAoc2xpbWVfY29pbl9jYXBfMV9sZXZlbCA+PSAxMDAwMDAwMDAwKSB7XHJcbiAgICBzbGltZV9jb2luX2NhcF8xX2Nvc3QgPSAxMDAwMDAwMDAwMDAwMDAwMDtcclxuICB9IC8vIDEuMDArRTE2XHJcbiAgZWxzZSBpZiAoc2xpbWVfY29pbl9jYXBfMV9sZXZlbCA+PSA1MDAwMDAwMDApIHtcclxuICAgIHNsaW1lX2NvaW5fY2FwXzFfY29zdCA9IDEwMDAwMDAwMDAwMDAwMDA7XHJcbiAgfSAvLyAxLjAwK0UxNVxyXG4gIGVsc2UgaWYgKHNsaW1lX2NvaW5fY2FwXzFfbGV2ZWwgPj0gMTAwMDAwMDAwKSB7XHJcbiAgICBzbGltZV9jb2luX2NhcF8xX2Nvc3QgPSAxMDAwMDAwMDAwMDAwMDA7XHJcbiAgfSAvLyAxMDBUXHJcbiAgZWxzZSBpZiAoc2xpbWVfY29pbl9jYXBfMV9sZXZlbCA+PSA1MDAwMDAwMCkge1xyXG4gICAgc2xpbWVfY29pbl9jYXBfMV9jb3N0ID0gMTAwMDAwMDAwMDAwMDA7XHJcbiAgfSAvLyAxMFRcclxuICBlbHNlIGlmIChzbGltZV9jb2luX2NhcF8xX2xldmVsID49IDEwMDAwMDAwKSB7XHJcbiAgICBzbGltZV9jb2luX2NhcF8xX2Nvc3QgPSAxMDAwMDAwMDAwMDAwO1xyXG4gIH0gLy8gMVRcclxuICBlbHNlIHtcclxuICAgIHNsaW1lX2NvaW5fY2FwXzFfY29zdCA9XHJcbiAgICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwic2xpbWUtYmFuay11cGdyYWRlLXNsaW1lLWNvaW4tY2FwLTEtbGV2ZWxcIikgKlxyXG4gICAgICAgIDEwMDAwICtcclxuICAgICAgMTAwMDA7XHJcbiAgfSAvLyBuZWVkIHRvIGZpbmQgc29sdXRpb24gZm9yIGxlc3MgdGhhbiAxME0gdXBncmFkZXNcclxuXHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHJcbiAgICBcInNsaW1lLWJhbmstdXBncmFkZS1zbGltZS1jb2luLWNhcC0xLWNvc3RcIlxyXG4gICkuaW5uZXJIVE1MID0gY29udmVydChzbGltZV9jb2luX2NhcF8xX2Nvc3QpO1xyXG4gIGxldCBvdXRwdXQgPSBNYXRoLnJvdW5kKGludHJlc3QgLyBzbGltZV9jb2luX2NhcF8xX2Nvc3QpO1xyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2xpbWUtYmFuay1vcHRpbWlzZXJcIikuaW5uZXJIVE1MID0gb3V0cHV0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBzbGltZUJhbmtTbGltZUNvaW5DYXAxKGlucHV0KSB7XHJcbiAgaW5wdXQgPSBjb252ZXJ0MihpbnB1dCk7XHJcblxyXG4gIGlmIChcclxuICAgIGlucHV0ICE9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwic2xpbWUtYmFuay11cGdyYWRlLXNsaW1lLWNvaW4tY2FwLTEtbGV2ZWxcIilcclxuICApIHtcclxuICAgIGxldCBvdXRwdXQgPSBzaWdtYShcclxuICAgICAgMCxcclxuICAgICAgaW5wdXQsXHJcbiAgICAgIGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgcmV0dXJuIGEgKiAyMCAtIDEwICsgMTAwMDA7XHJcbiAgICAgIH0sXHJcbiAgICAgIDEwXHJcbiAgICApO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHJcbiAgICAgIFwic2xpbWUtYmFuay11cGdyYWRlLXNsaW1lLWNvaW4tY2FwLTEtdmFsdWVcIlxyXG4gICAgKS5pbm5lckhUTUwgPSBjb252ZXJ0KG91dHB1dCk7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInNsaW1lLWJhbmstdXBncmFkZS1zbGltZS1jb2luLWNhcC0xLWxldmVsXCIsIGlucHV0KTtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwic2xpbWUtYmFuay11cGdyYWRlLXNsaW1lLWNvaW4tY2FwLTEtdmFsdWVcIiwgb3V0cHV0KTtcclxuICB9IGVsc2Uge1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHJcbiAgICAgIFwic2xpbWUtYmFuay11cGdyYWRlLXNsaW1lLWNvaW4tY2FwLTEtdmFsdWVcIlxyXG4gICAgKS5pbm5lckhUTUwgPSBjb252ZXJ0KFxyXG4gICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInNsaW1lLWJhbmstdXBncmFkZS1zbGltZS1jb2luLWNhcC0xLXZhbHVlXCIpXHJcbiAgICApO1xyXG4gIH1cclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNsaW1lLWJhbmstdXBncmFkZS1zbGltZS1jb2luLWNhcC0xLWxldmVsXCIpLnZhbHVlID1cclxuICAgIGNvbnZlcnQobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJzbGltZS1iYW5rLXVwZ3JhZGUtc2xpbWUtY29pbi1jYXAtMS1sZXZlbFwiKSk7XHJcbiAgc2xpbWVCYW5rU2xpbWVDb2luQ2FwVG90YWwoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2xpbWVCYW5rU2xpbWVDb2luQ2FwMihpbnB1dCkge1xyXG4gIGxldCBvdXRwdXQgPSBzaWdtYShcclxuICAgIDAsXHJcbiAgICBpbnB1dCxcclxuICAgIGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgIHJldHVybiBhICogMjAgLSAxMDtcclxuICAgIH0sXHJcbiAgICAxMFxyXG4gICk7XHJcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJzbGltZS1iYW5rLXVwZ3JhZGUtc2xpbWUtY29pbi1jYXAtMi1sZXZlbFwiLCBpbnB1dCk7XHJcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXHJcbiAgICBcInNsaW1lLWJhbmstdXBncmFkZS1zbGltZS1jb2luLWNhcC0yLXZhbHVlXCIsXHJcbiAgICBvdXRwdXQgKyAxMDBcclxuICApO1xyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxyXG4gICAgXCJzbGltZS1iYW5rLXVwZ3JhZGUtc2xpbWUtY29pbi1jYXAtMi12YWx1ZVwiXHJcbiAgKS5pbm5lckhUTUwgPSBjb252ZXJ0KG91dHB1dCArIDEwMCk7XHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzbGltZS1iYW5rLXVwZ3JhZGUtc2xpbWUtY29pbi1jYXAtMi1sZXZlbFwiKS52YWx1ZSA9XHJcbiAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInNsaW1lLWJhbmstdXBncmFkZS1zbGltZS1jb2luLWNhcC0yLWxldmVsXCIpO1xyXG4gIHNsaW1lQmFua1NsaW1lQ29pbkNhcFRvdGFsKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNsaW1lQmFua1Jlc2VhcmNoU3RvbmUoaW5wdXQpIHtcclxuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInNsaW1lLWJhbmstcmVzZWFyY2gtc3RvbmUtbGV2ZWxcIiwgaW5wdXQpO1xyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2xpbWUtYmFuay1yZXNlYXJjaC1zdG9uZS1sZXZlbFwiKS52YWx1ZSA9XHJcbiAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInNsaW1lLWJhbmstcmVzZWFyY2gtc3RvbmUtbGV2ZWxcIik7XHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzbGltZS1iYW5rLXJlc2VhcmNoLXN0b25lLXZhbHVlXCIpLmlubmVySFRNTCA9ICsoXHJcbiAgICBpbnB1dCAqIDAuMVxyXG4gICkudG9GaXhlZCgyKTtcclxuICBzbGltZUJhbmtJbnRyZXN0KCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNsaW1lQmFua1Jlc2VhcmNoTGVhZihpbnB1dCkge1xyXG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwic2xpbWUtYmFuay1yZXNlYXJjaC1sZWFmLWxldmVsXCIsIGlucHV0KTtcclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNsaW1lLWJhbmstcmVzZWFyY2gtbGVhZi1sZXZlbFwiKS52YWx1ZSA9XHJcbiAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInNsaW1lLWJhbmstcmVzZWFyY2gtbGVhZi1sZXZlbFwiKTtcclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNsaW1lLWJhbmstcmVzZWFyY2gtbGVhZi12YWx1ZVwiKS5pbm5lckhUTUwgPVxyXG4gICAgKyhpbnB1dCAqIDIpLnRvRml4ZWQoMikgKyAxMDA7XHJcbiAgc2xpbWVCYW5rU2xpbWVDb2luQ2FwVG90YWwoKTtcclxufVxyXG5cclxuZXhwb3J0IHtcclxuICBzbGltZUJhbmtTbGltZUNvaW5DYXAxLFxyXG4gIHNsaW1lQmFua1NsaW1lQ29pbkNhcDIsXHJcbiAgc2xpbWVCYW5rUmVzZWFyY2hTdG9uZSxcclxuICBzbGltZUJhbmtSZXNlYXJjaExlYWYsXHJcbiAgc2xpbWVCYW5rSW50cmVzdCxcclxuICBzbGltZUJhbmtPcHRpbWlzZXIsXHJcbiAgc2xpbWVCYW5rU2xpbWVDb2luQ2FwVG90YWwsXHJcbn07XHJcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsIi8vIGltcG9ydCB7IGN1cnJlbnRUYWIgfSBmcm9tIFwiLi9jb21tb24uanNcIjtcclxuLy8gaW1wb3J0IHsgY3VycmVudFRhYiB9IGZyb20gXCJleHBvc2UtbG9hZGVyP2V4cG9zZXM9d2luZG93LiQgY3VycmVudFRhYlwiO1xyXG4vL1xyXG4vLyBBZGRzIHRoZSBganF1ZXJ5YCB0byB0aGUgZ2xvYmFsIG9iamVjdCB1bmRlciB0aGUgbmFtZXMgYCRgIGFuZCBgalF1ZXJ5YFxyXG5pbXBvcnQgeyBsb2FkIH0gZnJvbSBcIi4vbG9hZC5qc1wiO1xyXG5jb25zdCB7IGZpbGUsIHBhcnNlIH0gPSByZXF1aXJlKFwiLi9nbG9iYWxzLmpzXCIpO1xyXG5cclxuZnVuY3Rpb24gcmVhZHkoZm4pIHtcclxuICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSAhPSBcImxvYWRpbmdcIikge1xyXG4gICAgZm4oKTtcclxuICB9IGVsc2Uge1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZm4pO1xyXG4gIH1cclxufVxyXG5cclxucmVhZHkoZnVuY3Rpb24gKCkge1xyXG4gIC8vIHN0YXJ0IHVwIHlvdXIgYXBwXHJcbiAgbG9hZCgpO1xyXG4gIC8vIGNvbnNvbGUubG9nKGRvY3VtZW50LmJvZHkpO1xyXG4gIC8vIGNvbnN0IHh4eCA9IGN1cnJlbnRUYWIoKTtcclxufSk7XHJcbi8vIHRoaXMuYWxlcnQoXCJIbW1tLCB0aGlzIHByb2JhYmx5IGlzbid0IGEgZ3JlYXQgaWRlYS4uLlwiKTtcclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9